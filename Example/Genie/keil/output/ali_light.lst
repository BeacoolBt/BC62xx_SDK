   1              		.syntax unified
   2              		.cpu cortex-m0
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 4
  11              		.eabi_attribute 34, 0
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.syntax unified
  15              		.file	"ali_light.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.comm	L_LEV,4,4
  20              		.comm	GPIO_FUNC,1,1
  21              		.global	__aeabi_idiv
  22              		.align	1
  23              		.code	16
  24              		.thumb_func
  26              	_ready_to_indicate:
  27              	.LFB85:
  28              		.file 1 "../../../mesh/app/ali_light/ali_light.c"
   1:../../../mesh/app/ali_light/ali_light.c **** #include "ali_light.h"
   2:../../../mesh/app/ali_light/ali_light.c **** #include "mm_defines.h"
   3:../../../mesh/app/ali_light/ali_light.c **** #include "meshTimer.h"
   4:../../../mesh/app/ali_light/ali_light.c **** 
   5:../../../mesh/app/ali_light/ali_light.c **** #include "bc_flash.h"
   6:../../../mesh/app/ali_light/ali_light.c **** #include "bc_sys.h"
   7:../../../mesh/app/ali_light/ali_light.c **** 
   8:../../../mesh/app/ali_light/ali_light.c **** #ifdef BREATH_CONFIG
   9:../../../mesh/app/ali_light/ali_light.c **** #define REPEAT_COUNTER	(100)
  10:../../../mesh/app/ali_light/ali_light.c **** #endif
  11:../../../mesh/app/ali_light/ali_light.c **** 
  12:../../../mesh/app/ali_light/ali_light.c **** static ali_light_t* p_ali_light = NULL;
  13:../../../mesh/app/ali_light/ali_light.c **** 
  14:../../../mesh/app/ali_light/ali_light.c **** static void ali_light_period_ind_timer_cb(int param);
  15:../../../mesh/app/ali_light/ali_light.c **** 
  16:../../../mesh/app/ali_light/ali_light.c **** static void _ready_to_indicate(bool random)
  17:../../../mesh/app/ali_light/ali_light.c **** {
  29              		.loc 1 17 0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              	.LVL0:
  18:../../../mesh/app/ali_light/ali_light.c **** 	if(p_ali_light == NULL)
  34              		.loc 1 18 0
  35 0000 0D4B     		ldr	r3, .L11
  17:../../../mesh/app/ali_light/ali_light.c **** 	if(p_ali_light == NULL)
  36              		.loc 1 17 0
  37 0002 10B5     		push	{r4, lr}
  38              	.LCFI0:
  39              		.cfi_def_cfa_offset 8
  40              		.cfi_offset 4, -8
  41              		.cfi_offset 14, -4
  42              		.loc 1 18 0
  43 0004 1A68     		ldr	r2, [r3]
  44 0006 1C00     		movs	r4, r3
  45 0008 002A     		cmp	r2, #0
  46 000a 13D0     		beq	.L1
  47              	.LVL1:
  19:../../../mesh/app/ali_light/ali_light.c **** 		return;
  20:../../../mesh/app/ali_light/ali_light.c **** 	uint32_t delay_time = M_ALIS_INDICATION_PERIOD;
  21:../../../mesh/app/ali_light/ali_light.c **** 	if(random){
  48              		.loc 1 21 0
  49 000c 0028     		cmp	r0, #0
  50 000e 02D0     		beq	.L6
  22:../../../mesh/app/ali_light/ali_light.c **** 		delay_time = bc_mm_alis_get_random_time();
  51              		.loc 1 22 0
  52 0010 FFF7FEFF 		bl	bc_mm_alis_get_random_time
  53              	.LVL2:
  54 0014 00E0     		b	.L4
  55              	.LVL3:
  56              	.L6:
  20:../../../mesh/app/ali_light/ali_light.c **** 	if(random){
  57              		.loc 1 20 0
  58 0016 0948     		ldr	r0, .L11+4
  59              	.LVL4:
  60              	.L4:
  23:../../../mesh/app/ali_light/ali_light.c **** 	}
  24:../../../mesh/app/ali_light/ali_light.c **** 	
  25:../../../mesh/app/ali_light/ali_light.c **** 	//if bound
  26:../../../mesh/app/ali_light/ali_light.c **** 	if(p_ali_light->provState){
  61              		.loc 1 26 0
  62 0018 2468     		ldr	r4, [r4]
  63 001a 6378     		ldrb	r3, [r4, #1]
  64 001c 002B     		cmp	r3, #0
  65 001e 09D0     		beq	.L1
  27:../../../mesh/app/ali_light/ali_light.c **** 		SYS_SetTimer(&p_ali_light->periodIndTimer, (int)delay_time/10, 
  66              		.loc 1 27 0
  67 0020 0A21     		movs	r1, #10
  68 0022 FFF7FEFF 		bl	__aeabi_idiv
  69              	.LVL5:
  70 0026 0100     		movs	r1, r0
  71 0028 2000     		movs	r0, r4
  72 002a 054B     		ldr	r3, .L11+8
  73 002c 3C30     		adds	r0, r0, #60
  74 002e 0022     		movs	r2, #0
  75 0030 FFF7FEFF 		bl	SYS_SetTimer
  76              	.LVL6:
  77              	.L1:
  28:../../../mesh/app/ali_light/ali_light.c **** 					TIMER_SINGLE, ali_light_period_ind_timer_cb);
  29:../../../mesh/app/ali_light/ali_light.c **** 	}
  30:../../../mesh/app/ali_light/ali_light.c **** }
  78              		.loc 1 30 0
  79              		@ sp needed
  80 0034 10BD     		pop	{r4, pc}
  81              	.L12:
  82 0036 C046     		.align	2
  83              	.L11:
  84 0038 00000000 		.word	.LANCHOR0
  85 003c 407E0500 		.word	360000
  86 0040 00000000 		.word	ali_light_period_ind_timer_cb
  87              		.cfi_endproc
  88              	.LFE85:
  90              		.align	1
  91              		.global	ali_light_cw_set_on_off
  92              		.code	16
  93              		.thumb_func
  95              	ali_light_cw_set_on_off:
  96              	.LFB87:
  31:../../../mesh/app/ali_light/ali_light.c **** 
  32:../../../mesh/app/ali_light/ali_light.c **** 
  33:../../../mesh/app/ali_light/ali_light.c **** //light ctrl
  34:../../../mesh/app/ali_light/ali_light.c **** static void _light_cw_init(void)
  35:../../../mesh/app/ali_light/ali_light.c **** {
  36:../../../mesh/app/ali_light/ali_light.c **** 	static uint8_t _init = 0;
  37:../../../mesh/app/ali_light/ali_light.c **** 	if(_init == 1)
  38:../../../mesh/app/ali_light/ali_light.c **** 		return;
  39:../../../mesh/app/ali_light/ali_light.c **** 	_init = 1;
  40:../../../mesh/app/ali_light/ali_light.c **** #ifdef BREATH_CONFIG
  41:../../../mesh/app/ali_light/ali_light.c **** 	light_cw_t t = {.freq = ALI_CURRENT_FREQ,
  42:../../../mesh/app/ali_light/ali_light.c **** 					.ln = ALI_MIN_LN_VAL,
  43:../../../mesh/app/ali_light/ali_light.c **** 					.on = ALI_CW_OFF,
  44:../../../mesh/app/ali_light/ali_light.c **** 					.tp = ALI_DEFAULT_TP_VAL};
  45:../../../mesh/app/ali_light/ali_light.c **** #else
  46:../../../mesh/app/ali_light/ali_light.c **** 	light_cw_t t = {.freq = ALI_CURRENT_FREQ,
  47:../../../mesh/app/ali_light/ali_light.c **** 					.ln = ALI_DEFAULT_LN_VAL,
  48:../../../mesh/app/ali_light/ali_light.c **** 					.on = ALI_DEFAULT_ON_VAL,
  49:../../../mesh/app/ali_light/ali_light.c **** 					.tp = ALI_DEFAULT_TP_VAL};
  50:../../../mesh/app/ali_light/ali_light.c **** #endif
  51:../../../mesh/app/ali_light/ali_light.c **** 	t.tp = p_ali_light->tp;
  52:../../../mesh/app/ali_light/ali_light.c **** 	t.ln = p_ali_light->ln;
  53:../../../mesh/app/ali_light/ali_light.c **** #if (LIGHT_CW_WITH_RGB)
  54:../../../mesh/app/ali_light/ali_light.c **** 	t.onRgb = ALI_CW_OFF;
  55:../../../mesh/app/ali_light/ali_light.c **** 	t.lnRgb = p_ali_light->ln;
  56:../../../mesh/app/ali_light/ali_light.c **** 	t.rVal = p_ali_light->r;
  57:../../../mesh/app/ali_light/ali_light.c **** 	t.gVal = p_ali_light->g;
  58:../../../mesh/app/ali_light/ali_light.c **** 	t.bVal = p_ali_light->b;
  59:../../../mesh/app/ali_light/ali_light.c **** 	t.lmode = p_ali_light->lmode;
  60:../../../mesh/app/ali_light/ali_light.c **** #endif
  61:../../../mesh/app/ali_light/ali_light.c **** 	led_cw_init(&t);
  62:../../../mesh/app/ali_light/ali_light.c **** }
  63:../../../mesh/app/ali_light/ali_light.c **** void ali_light_cw_set_on_off(uint8_t on)
  64:../../../mesh/app/ali_light/ali_light.c **** {
  97              		.loc 1 64 0
  98              		.cfi_startproc
  99              		@ args = 0, pretend = 0, frame = 0
 100              		@ frame_needed = 0, uses_anonymous_args = 0
 101              	.LVL7:
  65:../../../mesh/app/ali_light/ali_light.c **** 	M_PRINTF(L_APP, "on[%x]", on);
 102              		.loc 1 65 0
 103 0044 104B     		ldr	r3, .L18
  64:../../../mesh/app/ali_light/ali_light.c **** 	M_PRINTF(L_APP, "on[%x]", on);
 104              		.loc 1 64 0
 105 0046 37B5     		push	{r0, r1, r2, r4, r5, lr}
 106              	.LCFI1:
 107              		.cfi_def_cfa_offset 24
 108              		.cfi_offset 0, -24
 109              		.cfi_offset 1, -20
 110              		.cfi_offset 2, -16
 111              		.cfi_offset 4, -12
 112              		.cfi_offset 5, -8
 113              		.cfi_offset 14, -4
 114              		.loc 1 65 0
 115 0048 1B68     		ldr	r3, [r3]
  64:../../../mesh/app/ali_light/ali_light.c **** 	M_PRINTF(L_APP, "on[%x]", on);
 116              		.loc 1 64 0
 117 004a 0500     		movs	r5, r0
 118              		.loc 1 65 0
 119 004c 9B04     		lsls	r3, r3, #18
 120 004e 15D5     		bpl	.L14
 121              		.loc 1 65 0 is_stmt 0 discriminator 5
 122 0050 0E4C     		ldr	r4, .L18+4
 123 0052 2300     		movs	r3, r4
 124 0054 2200     		movs	r2, r4
 125 0056 2000     		movs	r0, r4
 126              	.LVL8:
 127 0058 4033     		adds	r3, r3, #64
 128 005a 2532     		adds	r2, r2, #37
 129 005c 0093     		str	r3, [sp]
 130 005e 2100     		movs	r1, r4
 131 0060 4123     		movs	r3, #65
 132 0062 3130     		adds	r0, r0, #49
 133 0064 FFF7FEFF 		bl	m_print
 134              	.LVL9:
 135 0068 2000     		movs	r0, r4
 136 006a 2900     		movs	r1, r5
 137 006c 5830     		adds	r0, r0, #88
 138 006e FFF7FEFF 		bl	m_print
 139              	.LVL10:
 140 0072 2000     		movs	r0, r4
 141 0074 A11D     		adds	r1, r4, #6
 142 0076 5F30     		adds	r0, r0, #95
 143 0078 FFF7FEFF 		bl	m_print
 144              	.LVL11:
 145              	.L14:
  66:../../../mesh/app/ali_light/ali_light.c **** #ifdef BREATH_CONFIG
  67:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.mode = BREATH_MODE_FLOW;
  68:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.rCnt = 1;
  69:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.pCnt = REPEAT_COUNTER;
  70:../../../mesh/app/ali_light/ali_light.c **** 	led_cw_set_on_off(on, &p_ali_light->breath);
  71:../../../mesh/app/ali_light/ali_light.c **** #else
  72:../../../mesh/app/ali_light/ali_light.c **** 	led_cw_set_on_off(on, NULL);
 146              		.loc 1 72 0 is_stmt 1
 147 007c 2800     		movs	r0, r5
 148 007e 0021     		movs	r1, #0
 149 0080 FFF7FEFF 		bl	led_cw_set_on_off
 150              	.LVL12:
  73:../../../mesh/app/ali_light/ali_light.c **** #endif
  74:../../../mesh/app/ali_light/ali_light.c **** }
 151              		.loc 1 74 0
 152              		@ sp needed
 153 0084 37BD     		pop	{r0, r1, r2, r4, r5, pc}
 154              	.L19:
 155 0086 C046     		.align	2
 156              	.L18:
 157 0088 00000000 		.word	L_LEV
 158 008c 00000000 		.word	.LANCHOR1
 159              		.cfi_endproc
 160              	.LFE87:
 162              		.align	1
 163              		.global	ali_light_cw_get_on_off
 164              		.code	16
 165              		.thumb_func
 167              	ali_light_cw_get_on_off:
 168              	.LFB88:
  75:../../../mesh/app/ali_light/ali_light.c **** uint8_t ali_light_cw_get_on_off(void)
  76:../../../mesh/app/ali_light/ali_light.c **** {
 169              		.loc 1 76 0
 170              		.cfi_startproc
 171              		@ args = 0, pretend = 0, frame = 0
 172              		@ frame_needed = 0, uses_anonymous_args = 0
 173 0090 10B5     		push	{r4, lr}
 174              	.LCFI2:
 175              		.cfi_def_cfa_offset 8
 176              		.cfi_offset 4, -8
 177              		.cfi_offset 14, -4
  77:../../../mesh/app/ali_light/ali_light.c **** 	return led_cw_get_on_off();
 178              		.loc 1 77 0
 179 0092 FFF7FEFF 		bl	led_cw_get_on_off
 180              	.LVL13:
  78:../../../mesh/app/ali_light/ali_light.c **** }
 181              		.loc 1 78 0
 182              		@ sp needed
 183 0096 10BD     		pop	{r4, pc}
 184              		.cfi_endproc
 185              	.LFE88:
 187              		.align	1
 188              		.global	ali_light_cw_set_lightness
 189              		.code	16
 190              		.thumb_func
 192              	ali_light_cw_set_lightness:
 193              	.LFB89:
  79:../../../mesh/app/ali_light/ali_light.c **** void ali_light_cw_set_lightness(uint16_t ln)
  80:../../../mesh/app/ali_light/ali_light.c **** {
 194              		.loc 1 80 0
 195              		.cfi_startproc
 196              		@ args = 0, pretend = 0, frame = 0
 197              		@ frame_needed = 0, uses_anonymous_args = 0
 198              	.LVL14:
 199 0098 70B5     		push	{r4, r5, r6, lr}
 200              	.LCFI3:
 201              		.cfi_def_cfa_offset 16
 202              		.cfi_offset 4, -16
 203              		.cfi_offset 5, -12
 204              		.cfi_offset 6, -8
 205              		.cfi_offset 14, -4
 206              		.loc 1 80 0
 207 009a 0600     		movs	r6, r0
  81:../../../mesh/app/ali_light/ali_light.c **** #ifdef BREATH_CONFIG
  82:../../../mesh/app/ali_light/ali_light.c **** 	if(ln < ALI_MIN_LN_VAL){
  83:../../../mesh/app/ali_light/ali_light.c **** 		ln = ALI_MIN_LN_VAL;
  84:../../../mesh/app/ali_light/ali_light.c **** 	}
  85:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.mode = BREATH_MODE_FLOW;
  86:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.rCnt = 1;
  87:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.pCnt = REPEAT_COUNTER;
  88:../../../mesh/app/ali_light/ali_light.c **** 	led_cw_set_lightness(ln, &p_ali_light->breath);
  89:../../../mesh/app/ali_light/ali_light.c **** #else
  90:../../../mesh/app/ali_light/ali_light.c **** 	led_cw_set_lightness(ln, NULL);
 208              		.loc 1 90 0
 209 009c 0021     		movs	r1, #0
 210 009e FFF7FEFF 		bl	led_cw_set_lightness
 211              	.LVL15:
  91:../../../mesh/app/ali_light/ali_light.c **** #endif
  92:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->ln = ln;
 212              		.loc 1 92 0
 213 00a2 094D     		ldr	r5, .L22
  93:../../../mesh/app/ali_light/ali_light.c **** 	//do save
  94:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->saveCfgCrc = bc_sys_check_sum((uint8_t*)p_ali_light, ALI_LIGHT_SAVE_LEN-1);
 214              		.loc 1 94 0
 215 00a4 0821     		movs	r1, #8
  92:../../../mesh/app/ali_light/ali_light.c **** 	//do save
 216              		.loc 1 92 0
 217 00a6 2C68     		ldr	r4, [r5]
  95:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_erase(FLASH_ALI_START_ADDRRESS, 1);
  96:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_write(FLASH_ALI_START_ADDRRESS, ALI_LIGHT_SAVE_LEN,(uint8_t*)p_ali_light);
  97:../../../mesh/app/ali_light/ali_light.c **** }
 218              		.loc 1 97 0
 219              		@ sp needed
  92:../../../mesh/app/ali_light/ali_light.c **** 	//do save
 220              		.loc 1 92 0
 221 00a8 E680     		strh	r6, [r4, #6]
  94:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_erase(FLASH_ALI_START_ADDRRESS, 1);
 222              		.loc 1 94 0
 223 00aa 2000     		movs	r0, r4
 224 00ac FFF7FEFF 		bl	bc_sys_check_sum
 225              	.LVL16:
  95:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_erase(FLASH_ALI_START_ADDRRESS, 1);
 226              		.loc 1 95 0
 227 00b0 0121     		movs	r1, #1
  94:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_erase(FLASH_ALI_START_ADDRRESS, 1);
 228              		.loc 1 94 0
 229 00b2 2072     		strb	r0, [r4, #8]
  95:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_erase(FLASH_ALI_START_ADDRRESS, 1);
 230              		.loc 1 95 0
 231 00b4 0020     		movs	r0, #0
 232 00b6 FFF7FEFF 		bl	bc_flash_erase
 233              	.LVL17:
  96:../../../mesh/app/ali_light/ali_light.c **** }
 234              		.loc 1 96 0
 235 00ba 2A68     		ldr	r2, [r5]
 236 00bc 0921     		movs	r1, #9
 237 00be 0020     		movs	r0, #0
 238 00c0 FFF7FEFF 		bl	bc_flash_write
 239              	.LVL18:
 240              		.loc 1 97 0
 241 00c4 70BD     		pop	{r4, r5, r6, pc}
 242              	.L23:
 243 00c6 C046     		.align	2
 244              	.L22:
 245 00c8 00000000 		.word	.LANCHOR0
 246              		.cfi_endproc
 247              	.LFE89:
 249              		.align	1
 250              		.global	ali_light_cw_get_lightness
 251              		.code	16
 252              		.thumb_func
 254              	ali_light_cw_get_lightness:
 255              	.LFB90:
  98:../../../mesh/app/ali_light/ali_light.c **** uint16_t ali_light_cw_get_lightness(void)
  99:../../../mesh/app/ali_light/ali_light.c **** {
 256              		.loc 1 99 0
 257              		.cfi_startproc
 258              		@ args = 0, pretend = 0, frame = 0
 259              		@ frame_needed = 0, uses_anonymous_args = 0
 260 00cc 10B5     		push	{r4, lr}
 261              	.LCFI4:
 262              		.cfi_def_cfa_offset 8
 263              		.cfi_offset 4, -8
 264              		.cfi_offset 14, -4
 100:../../../mesh/app/ali_light/ali_light.c **** 	return led_cw_get_lightness();
 265              		.loc 1 100 0
 266 00ce FFF7FEFF 		bl	led_cw_get_lightness
 267              	.LVL19:
 101:../../../mesh/app/ali_light/ali_light.c **** }
 268              		.loc 1 101 0
 269              		@ sp needed
 270 00d2 10BD     		pop	{r4, pc}
 271              		.cfi_endproc
 272              	.LFE90:
 274              		.align	1
 275              		.global	ali_light_cw_set_temperature
 276              		.code	16
 277              		.thumb_func
 279              	ali_light_cw_set_temperature:
 280              	.LFB91:
 102:../../../mesh/app/ali_light/ali_light.c **** void ali_light_cw_set_temperature(uint16_t tp)
 103:../../../mesh/app/ali_light/ali_light.c **** {
 281              		.loc 1 103 0
 282              		.cfi_startproc
 283              		@ args = 0, pretend = 0, frame = 0
 284              		@ frame_needed = 0, uses_anonymous_args = 0
 285              	.LVL20:
 286 00d4 70B5     		push	{r4, r5, r6, lr}
 287              	.LCFI5:
 288              		.cfi_def_cfa_offset 16
 289              		.cfi_offset 4, -16
 290              		.cfi_offset 5, -12
 291              		.cfi_offset 6, -8
 292              		.cfi_offset 14, -4
 293              		.loc 1 103 0
 294 00d6 0600     		movs	r6, r0
 104:../../../mesh/app/ali_light/ali_light.c **** #ifdef BREATH_CONFIG
 105:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.mode = BREATH_MODE_FLOW;
 106:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.rCnt = 1;
 107:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.pCnt = REPEAT_COUNTER;
 108:../../../mesh/app/ali_light/ali_light.c **** 	led_cw_set_temperature(tp, &p_ali_light->breath);
 109:../../../mesh/app/ali_light/ali_light.c **** #else
 110:../../../mesh/app/ali_light/ali_light.c **** 	led_cw_set_temperature(tp, NULL);
 295              		.loc 1 110 0
 296 00d8 0021     		movs	r1, #0
 297 00da FFF7FEFF 		bl	led_cw_set_temperature
 298              	.LVL21:
 111:../../../mesh/app/ali_light/ali_light.c **** #endif
 112:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->tp = tp;
 299              		.loc 1 112 0
 300 00de 094D     		ldr	r5, .L26
 113:../../../mesh/app/ali_light/ali_light.c **** 
 114:../../../mesh/app/ali_light/ali_light.c **** #if (LIGHT_CW_WITH_RGB)
 115:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->lmode = 0;
 116:../../../mesh/app/ali_light/ali_light.c **** #endif
 117:../../../mesh/app/ali_light/ali_light.c **** 
 118:../../../mesh/app/ali_light/ali_light.c **** 	//do save 
 119:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->saveCfgCrc = bc_sys_check_sum((uint8_t*)p_ali_light, ALI_LIGHT_SAVE_LEN-1);
 301              		.loc 1 119 0
 302 00e0 0821     		movs	r1, #8
 112:../../../mesh/app/ali_light/ali_light.c **** 
 303              		.loc 1 112 0
 304 00e2 2C68     		ldr	r4, [r5]
 120:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_erase(FLASH_ALI_START_ADDRRESS, 1);
 121:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_write(FLASH_ALI_START_ADDRRESS, ALI_LIGHT_SAVE_LEN,(uint8_t*)p_ali_light);
 122:../../../mesh/app/ali_light/ali_light.c **** }
 305              		.loc 1 122 0
 306              		@ sp needed
 112:../../../mesh/app/ali_light/ali_light.c **** 
 307              		.loc 1 112 0
 308 00e4 A680     		strh	r6, [r4, #4]
 119:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_erase(FLASH_ALI_START_ADDRRESS, 1);
 309              		.loc 1 119 0
 310 00e6 2000     		movs	r0, r4
 311 00e8 FFF7FEFF 		bl	bc_sys_check_sum
 312              	.LVL22:
 120:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_erase(FLASH_ALI_START_ADDRRESS, 1);
 313              		.loc 1 120 0
 314 00ec 0121     		movs	r1, #1
 119:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_erase(FLASH_ALI_START_ADDRRESS, 1);
 315              		.loc 1 119 0
 316 00ee 2072     		strb	r0, [r4, #8]
 120:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_erase(FLASH_ALI_START_ADDRRESS, 1);
 317              		.loc 1 120 0
 318 00f0 0020     		movs	r0, #0
 319 00f2 FFF7FEFF 		bl	bc_flash_erase
 320              	.LVL23:
 121:../../../mesh/app/ali_light/ali_light.c **** }
 321              		.loc 1 121 0
 322 00f6 2A68     		ldr	r2, [r5]
 323 00f8 0921     		movs	r1, #9
 324 00fa 0020     		movs	r0, #0
 325 00fc FFF7FEFF 		bl	bc_flash_write
 326              	.LVL24:
 327              		.loc 1 122 0
 328 0100 70BD     		pop	{r4, r5, r6, pc}
 329              	.L27:
 330 0102 C046     		.align	2
 331              	.L26:
 332 0104 00000000 		.word	.LANCHOR0
 333              		.cfi_endproc
 334              	.LFE91:
 336              		.align	1
 337              		.global	ali_light_cw_get_temperature
 338              		.code	16
 339              		.thumb_func
 341              	ali_light_cw_get_temperature:
 342              	.LFB92:
 123:../../../mesh/app/ali_light/ali_light.c **** uint16_t ali_light_cw_get_temperature(void)
 124:../../../mesh/app/ali_light/ali_light.c **** {
 343              		.loc 1 124 0
 344              		.cfi_startproc
 345              		@ args = 0, pretend = 0, frame = 0
 346              		@ frame_needed = 0, uses_anonymous_args = 0
 347 0108 10B5     		push	{r4, lr}
 348              	.LCFI6:
 349              		.cfi_def_cfa_offset 8
 350              		.cfi_offset 4, -8
 351              		.cfi_offset 14, -4
 125:../../../mesh/app/ali_light/ali_light.c **** 	return led_cw_get_temperature();
 352              		.loc 1 125 0
 353 010a FFF7FEFF 		bl	led_cw_get_temperature
 354              	.LVL25:
 126:../../../mesh/app/ali_light/ali_light.c **** }
 355              		.loc 1 126 0
 356              		@ sp needed
 357 010e 10BD     		pop	{r4, pc}
 358              		.cfi_endproc
 359              	.LFE92:
 361              		.align	1
 362              		.global	ali_light_rgb_get
 363              		.code	16
 364              		.thumb_func
 366              	ali_light_rgb_get:
 367              	.LFB93:
 127:../../../mesh/app/ali_light/ali_light.c **** 
 128:../../../mesh/app/ali_light/ali_light.c **** int ali_light_rgb_get(uint16_t* l, uint16_t* h, uint16_t* s)
 129:../../../mesh/app/ali_light/ali_light.c **** {
 368              		.loc 1 129 0
 369              		.cfi_startproc
 370              		@ args = 0, pretend = 0, frame = 0
 371              		@ frame_needed = 0, uses_anonymous_args = 0
 372              		@ link register save eliminated.
 373              	.LVL26:
 130:../../../mesh/app/ali_light/ali_light.c **** 	*l = 0;
 374              		.loc 1 130 0
 375 0110 0023     		movs	r3, #0
 131:../../../mesh/app/ali_light/ali_light.c **** 	*h = 0;
 132:../../../mesh/app/ali_light/ali_light.c **** 	*s = 0;
 133:../../../mesh/app/ali_light/ali_light.c **** 	return 0;
 134:../../../mesh/app/ali_light/ali_light.c **** }
 376              		.loc 1 134 0
 377              		@ sp needed
 130:../../../mesh/app/ali_light/ali_light.c **** 	*l = 0;
 378              		.loc 1 130 0
 379 0112 0380     		strh	r3, [r0]
 131:../../../mesh/app/ali_light/ali_light.c **** 	*h = 0;
 380              		.loc 1 131 0
 381 0114 0B80     		strh	r3, [r1]
 382              		.loc 1 134 0
 383 0116 1800     		movs	r0, r3
 384              	.LVL27:
 132:../../../mesh/app/ali_light/ali_light.c **** 	return 0;
 385              		.loc 1 132 0
 386 0118 1380     		strh	r3, [r2]
 387              		.loc 1 134 0
 388 011a 7047     		bx	lr
 389              		.cfi_endproc
 390              	.LFE93:
 392              		.align	1
 393              		.global	ali_light_rgb_set
 394              		.code	16
 395              		.thumb_func
 397              	ali_light_rgb_set:
 398              	.LFB94:
 135:../../../mesh/app/ali_light/ali_light.c **** int ali_light_rgb_set(uint16_t l, uint16_t h, uint16_t s)
 136:../../../mesh/app/ali_light/ali_light.c **** {
 399              		.loc 1 136 0
 400              		.cfi_startproc
 401              		@ args = 0, pretend = 0, frame = 0
 402              		@ frame_needed = 0, uses_anonymous_args = 0
 403              		@ link register save eliminated.
 404              	.LVL28:
 137:../../../mesh/app/ali_light/ali_light.c **** #if (LIGHT_CW_WITH_RGB)
 138:../../../mesh/app/ali_light/ali_light.c **** 	uint16_t r,g,b;
 139:../../../mesh/app/ali_light/ali_light.c **** 	if(l == 0x8000 && h == 0xaaaa && s == 0xffff){
 140:../../../mesh/app/ali_light/ali_light.c **** 		//blue (0,0,255)
 141:../../../mesh/app/ali_light/ali_light.c **** 		M_PRINTF(L_APP, "color blue");
 142:../../../mesh/app/ali_light/ali_light.c **** 		r = 0;
 143:../../../mesh/app/ali_light/ali_light.c **** 		g = 0;
 144:../../../mesh/app/ali_light/ali_light.c **** 		b = 65535;
 145:../../../mesh/app/ali_light/ali_light.c **** 	}
 146:../../../mesh/app/ali_light/ali_light.c **** 	else if(l == 0x8000 && h == 0x0000 && s == 0xffff){
 147:../../../mesh/app/ali_light/ali_light.c **** 		//red (255,0,0)
 148:../../../mesh/app/ali_light/ali_light.c **** 		M_PRINTF(L_APP, "color red");
 149:../../../mesh/app/ali_light/ali_light.c **** 		r = 65535;
 150:../../../mesh/app/ali_light/ali_light.c **** 		g = 0;
 151:../../../mesh/app/ali_light/ali_light.c **** 		b = 0;
 152:../../../mesh/app/ali_light/ali_light.c **** 	}
 153:../../../mesh/app/ali_light/ali_light.c **** 	else if(l == 0x8000 && h == 0x5555 && s == 0xffff){
 154:../../../mesh/app/ali_light/ali_light.c **** 		//green (0, 255, 0)
 155:../../../mesh/app/ali_light/ali_light.c **** 		M_PRINTF(L_APP, "color green");
 156:../../../mesh/app/ali_light/ali_light.c **** 		r = 0;
 157:../../../mesh/app/ali_light/ali_light.c **** 		g = 65535;
 158:../../../mesh/app/ali_light/ali_light.c **** 		b = 0;
 159:../../../mesh/app/ali_light/ali_light.c **** 	}
 160:../../../mesh/app/ali_light/ali_light.c **** 	else if(l == 0x8000 && h == 0x8000 && s == 0xffff){
 161:../../../mesh/app/ali_light/ali_light.c **** 		//cyan (0, 255, 255)
 162:../../../mesh/app/ali_light/ali_light.c **** 		M_PRINTF(L_APP, "color cyan");
 163:../../../mesh/app/ali_light/ali_light.c **** 		r = 0;
 164:../../../mesh/app/ali_light/ali_light.c **** 		g = 65535;
 165:../../../mesh/app/ali_light/ali_light.c **** 		b = 65535;
 166:../../../mesh/app/ali_light/ali_light.c **** 	}
 167:../../../mesh/app/ali_light/ali_light.c **** 	else if(l == 0x4040 && h == 0xD555 && s == 0xffff){
 168:../../../mesh/app/ali_light/ali_light.c **** 		//Purple (128, 0, 128)
 169:../../../mesh/app/ali_light/ali_light.c **** 		M_PRINTF(L_APP, "color Purple");
 170:../../../mesh/app/ali_light/ali_light.c **** 		r = 32768;
 171:../../../mesh/app/ali_light/ali_light.c **** 		g = 0;
 172:../../../mesh/app/ali_light/ali_light.c **** 		b = 32768;
 173:../../../mesh/app/ali_light/ali_light.c **** 	}
 174:../../../mesh/app/ali_light/ali_light.c **** 	else if(l == 0x8000 && h == 0x1b9b && s == 0xffff){
 175:../../../mesh/app/ali_light/ali_light.c **** 		//orange (255, 170, 0)
 176:../../../mesh/app/ali_light/ali_light.c **** 		M_PRINTF(L_APP, "color orange");
 177:../../../mesh/app/ali_light/ali_light.c **** 		r = 65535;
 178:../../../mesh/app/ali_light/ali_light.c **** 		g = 43520;
 179:../../../mesh/app/ali_light/ali_light.c **** 		b = 0;
 180:../../../mesh/app/ali_light/ali_light.c **** 	}
 181:../../../mesh/app/ali_light/ali_light.c **** 	else if(l == 0x8000 && h == 0x2aaa && s == 0xffff){
 182:../../../mesh/app/ali_light/ali_light.c **** 		//yellow (255,255,0)
 183:../../../mesh/app/ali_light/ali_light.c **** 		M_PRINTF(L_APP, "color yellow");
 184:../../../mesh/app/ali_light/ali_light.c **** 		r = 65535;
 185:../../../mesh/app/ali_light/ali_light.c **** 		g = 65535;
 186:../../../mesh/app/ali_light/ali_light.c **** 		b = 0;
 187:../../../mesh/app/ali_light/ali_light.c **** 	}
 188:../../../mesh/app/ali_light/ali_light.c **** 	else if(l == 0xffff && h == 0x0000 && s == 0x0000){
 189:../../../mesh/app/ali_light/ali_light.c **** 		//write (255,255,255)
 190:../../../mesh/app/ali_light/ali_light.c **** 		M_PRINTF(L_APP, "color write");
 191:../../../mesh/app/ali_light/ali_light.c **** 		r = 65535;
 192:../../../mesh/app/ali_light/ali_light.c **** 		g = 65535;
 193:../../../mesh/app/ali_light/ali_light.c **** 		b = 65535;
 194:../../../mesh/app/ali_light/ali_light.c **** 	}
 195:../../../mesh/app/ali_light/ali_light.c **** 	else{
 196:../../../mesh/app/ali_light/ali_light.c **** 		M_PRINTF(L_APP, "color error");
 197:../../../mesh/app/ali_light/ali_light.c **** 		return 0;
 198:../../../mesh/app/ali_light/ali_light.c **** 	}
 199:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.mode = BREATH_MODE_FLOW;
 200:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.rCnt = 1;
 201:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.pCnt = REPEAT_COUNTER;
 202:../../../mesh/app/ali_light/ali_light.c **** 	led_cwrgb_set_color(r, g, b, &p_ali_light->breath);
 203:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->r = r;
 204:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->g = g;
 205:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->b = b;
 206:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->lmode = 1;
 207:../../../mesh/app/ali_light/ali_light.c **** 	//do save
 208:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->saveCfgCrc = bc_sys_check_sum((uint8_t*)p_ali_light, ALI_LIGHT_SAVE_LEN-1);
 209:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_erase(FLASH_ALI_START_ADDRRESS, 1);
 210:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_write(FLASH_ALI_START_ADDRRESS, ALI_LIGHT_SAVE_LEN,(uint8_t*)p_ali_light);
 211:../../../mesh/app/ali_light/ali_light.c **** #endif
 212:../../../mesh/app/ali_light/ali_light.c **** 	return 0;
 213:../../../mesh/app/ali_light/ali_light.c **** }
 405              		.loc 1 213 0
 406 011c 0020     		movs	r0, #0
 407              	.LVL29:
 408              		@ sp needed
 409 011e 7047     		bx	lr
 410              		.cfi_endproc
 411              	.LFE94:
 413              		.align	1
 414              		.code	16
 415              		.thumb_func
 417              	ali_light_bind_timer_cb:
 418              	.LFB95:
 214:../../../mesh/app/ali_light/ali_light.c **** static void ali_light_bind_timer_cb(int param)
 215:../../../mesh/app/ali_light/ali_light.c **** {
 419              		.loc 1 215 0
 420              		.cfi_startproc
 421              		@ args = 0, pretend = 0, frame = 8
 422              		@ frame_needed = 0, uses_anonymous_args = 0
 423              	.LVL30:
 424 0120 F0B5     		push	{r4, r5, r6, r7, lr}
 425              	.LCFI7:
 426              		.cfi_def_cfa_offset 20
 427              		.cfi_offset 4, -20
 428              		.cfi_offset 5, -16
 429              		.cfi_offset 6, -12
 430              		.cfi_offset 7, -8
 431              		.cfi_offset 14, -4
 216:../../../mesh/app/ali_light/ali_light.c **** 	uint16_t status;
 217:../../../mesh/app/ali_light/ali_light.c **** 
 218:../../../mesh/app/ali_light/ali_light.c **** 	if(!p_ali_light->provState){
 432              		.loc 1 218 0
 433 0122 4F4E     		ldr	r6, .L49
 215:../../../mesh/app/ali_light/ali_light.c **** 	uint16_t status;
 434              		.loc 1 215 0
 435 0124 87B0     		sub	sp, sp, #28
 436              	.LCFI8:
 437              		.cfi_def_cfa_offset 48
 438              		.loc 1 218 0
 439 0126 3468     		ldr	r4, [r6]
 440 0128 6578     		ldrb	r5, [r4, #1]
 441 012a 002D     		cmp	r5, #0
 442 012c 0FD1     		bne	.L32
 219:../../../mesh/app/ali_light/ali_light.c **** 		p_ali_light->provState = 1;
 443              		.loc 1 219 0
 444 012e 0127     		movs	r7, #1
 220:../../../mesh/app/ali_light/ali_light.c **** 		p_ali_light->saveCfgCrc = bc_sys_check_sum((uint8_t*)p_ali_light, ALI_LIGHT_SAVE_LEN-1);
 445              		.loc 1 220 0
 446 0130 0821     		movs	r1, #8
 219:../../../mesh/app/ali_light/ali_light.c **** 		p_ali_light->provState = 1;
 447              		.loc 1 219 0
 448 0132 6770     		strb	r7, [r4, #1]
 449              		.loc 1 220 0
 450 0134 2000     		movs	r0, r4
 451              	.LVL31:
 452 0136 FFF7FEFF 		bl	bc_sys_check_sum
 453              	.LVL32:
 221:../../../mesh/app/ali_light/ali_light.c **** 		bc_flash_erase(FLASH_ALI_START_ADDRRESS, 1);
 454              		.loc 1 221 0
 455 013a 3900     		movs	r1, r7
 220:../../../mesh/app/ali_light/ali_light.c **** 		p_ali_light->saveCfgCrc = bc_sys_check_sum((uint8_t*)p_ali_light, ALI_LIGHT_SAVE_LEN-1);
 456              		.loc 1 220 0
 457 013c 2072     		strb	r0, [r4, #8]
 458              		.loc 1 221 0
 459 013e 2800     		movs	r0, r5
 460 0140 FFF7FEFF 		bl	bc_flash_erase
 461              	.LVL33:
 222:../../../mesh/app/ali_light/ali_light.c **** 		bc_flash_write(FLASH_ALI_START_ADDRRESS, ALI_LIGHT_SAVE_LEN,(uint8_t*)p_ali_light);
 462              		.loc 1 222 0
 463 0144 3268     		ldr	r2, [r6]
 464 0146 0921     		movs	r1, #9
 465 0148 2800     		movs	r0, r5
 466 014a FFF7FEFF 		bl	bc_flash_write
 467              	.LVL34:
 468              	.L32:
 223:../../../mesh/app/ali_light/ali_light.c **** 	}
 224:../../../mesh/app/ali_light/ali_light.c **** 	//model bind
 225:../../../mesh/app/ali_light/ali_light.c **** 	m_lid_t app_key_lid = 0;
 469              		.loc 1 225 0
 470 014e 1725     		movs	r5, #23
 471 0150 0020     		movs	r0, #0
 472 0152 6D44     		add	r5, r5, sp
 226:../../../mesh/app/ali_light/ali_light.c **** 	status = bc_m_key_app_find(0, &app_key_lid);
 473              		.loc 1 226 0
 474 0154 2900     		movs	r1, r5
 225:../../../mesh/app/ali_light/ali_light.c **** 	status = bc_m_key_app_find(0, &app_key_lid);
 475              		.loc 1 225 0
 476 0156 2870     		strb	r0, [r5]
 477              		.loc 1 226 0
 478 0158 FFF7FEFF 		bl	bc_m_key_app_find
 479              	.LVL35:
 480 015c 041E     		subs	r4, r0, #0
 227:../../../mesh/app/ali_light/ali_light.c **** 	if (status != M_ERR_NO_ERROR){
 481              		.loc 1 227 0
 482 015e 27D0     		beq	.L34
 228:../../../mesh/app/ali_light/ali_light.c **** 		M_PRINTF(L_FND, "m_tb_key_app_find error");
 483              		.loc 1 228 0
 484 0160 404B     		ldr	r3, .L49+4
 485 0162 1B68     		ldr	r3, [r3]
 486 0164 1B05     		lsls	r3, r3, #20
 487 0166 79D5     		bpl	.L31
 488              		.loc 1 228 0 is_stmt 0 discriminator 5
 489 0168 3F4C     		ldr	r4, .L49+8
 490 016a 2300     		movs	r3, r4
 491 016c 2200     		movs	r2, r4
 492 016e 2000     		movs	r0, r4
 493              	.LVL36:
 494 0170 6233     		adds	r3, r3, #98
 495 0172 2100     		movs	r1, r4
 496 0174 2532     		adds	r2, r2, #37
 497 0176 0093     		str	r3, [sp]
 498 0178 3130     		adds	r0, r0, #49
 499 017a E423     		movs	r3, #228
 500 017c FFF7FEFF 		bl	m_print
 501              	.LVL37:
 502 0180 2000     		movs	r0, r4
 503 0182 7A30     		adds	r0, r0, #122
 504 0184 FFF7FEFF 		bl	m_print
 505              	.LVL38:
 506 0188 2000     		movs	r0, r4
 507 018a A11D     		adds	r1, r4, #6
 508 018c 5F30     		adds	r0, r0, #95
 509 018e FFF7FEFF 		bl	m_print
 510              	.LVL39:
 511 0192 63E0     		b	.L31
 512              	.LVL40:
 513              	.L37:
 514              	.LBB16:
 515              	.LBB17:
 229:../../../mesh/app/ali_light/ali_light.c **** 		return;
 230:../../../mesh/app/ali_light/ali_light.c **** 	}
 231:../../../mesh/app/ali_light/ali_light.c **** 	for(uint8_t i = 0; i < p_ali_light->model_cnt; ++i){
 232:../../../mesh/app/ali_light/ali_light.c **** 		mesh_model_t* t = &p_ali_light->model[i];
 233:../../../mesh/app/ali_light/ali_light.c **** 		status = bc_m_key_model_bind(app_key_lid, t->lid);
 516              		.loc 1 233 0 is_stmt 1
 517 0194 2301     		lsls	r3, r4, #4
 518 0196 FF18     		adds	r7, r7, r3
 519              	.LVL41:
 520 0198 5D37     		adds	r7, r7, #93
 521 019a 3978     		ldrb	r1, [r7]
 522 019c 2878     		ldrb	r0, [r5]
 523 019e FFF7FEFF 		bl	bc_m_key_model_bind
 524              	.LVL42:
 234:../../../mesh/app/ali_light/ali_light.c **** 		if (status == M_ERR_NO_ERROR){
 525              		.loc 1 234 0
 526 01a2 0028     		cmp	r0, #0
 527 01a4 02D1     		bne	.L36
 235:../../../mesh/app/ali_light/ali_light.c **** 			// Inform the Model IO manager
 236:../../../mesh/app/ali_light/ali_light.c **** 			bc_m_mio_bind(t->lid);
 528              		.loc 1 236 0
 529 01a6 3878     		ldrb	r0, [r7]
 530              	.LVL43:
 531 01a8 FFF7FEFF 		bl	bc_m_mio_bind
 532              	.LVL44:
 533              	.L36:
 534              	.LBE17:
 231:../../../mesh/app/ali_light/ali_light.c **** 		mesh_model_t* t = &p_ali_light->model[i];
 535              		.loc 1 231 0 discriminator 2
 536 01ac 0134     		adds	r4, r4, #1
 537              	.LVL45:
 538 01ae E4B2     		uxtb	r4, r4
 539              	.LVL46:
 540              	.L34:
 231:../../../mesh/app/ali_light/ali_light.c **** 		mesh_model_t* t = &p_ali_light->model[i];
 541              		.loc 1 231 0 is_stmt 0 discriminator 1
 542 01b0 3768     		ldr	r7, [r6]
 543 01b2 3B00     		movs	r3, r7
 544 01b4 5433     		adds	r3, r3, #84
 545 01b6 1B78     		ldrb	r3, [r3]
 546 01b8 A342     		cmp	r3, r4
 547 01ba EBD8     		bhi	.L37
 548 01bc 0027     		movs	r7, #0
 549              	.LVL47:
 550              	.L38:
 551              	.LBE16:
 552              	.LBB18:
 237:../../../mesh/app/ali_light/ali_light.c **** 		}
 238:../../../mesh/app/ali_light/ali_light.c **** 	}
 239:../../../mesh/app/ali_light/ali_light.c **** 	
 240:../../../mesh/app/ali_light/ali_light.c **** 	//model subscription
 241:../../../mesh/app/ali_light/ali_light.c **** 	// Add address to the subscription list
 242:../../../mesh/app/ali_light/ali_light.c **** 	//灯的所有model自行绑定组播地址0xC000，0xCFFF。
 243:../../../mesh/app/ali_light/ali_light.c **** 	for(uint8_t i = 0; i < p_ali_light->model_cnt; ++i){
 553              		.loc 1 243 0 is_stmt 1 discriminator 1
 554 01be 3468     		ldr	r4, [r6]
 555 01c0 2300     		movs	r3, r4
 556 01c2 5433     		adds	r3, r3, #84
 557 01c4 1B78     		ldrb	r3, [r3]
 558 01c6 9F42     		cmp	r7, r3
 559 01c8 0ED2     		bcs	.L48
 560              	.LVL48:
 561              	.LBB19:
 244:../../../mesh/app/ali_light/ali_light.c **** 		mesh_model_t* t = &p_ali_light->model[i];
 245:../../../mesh/app/ali_light/ali_light.c **** 		//status = bc_m_mio_add_subscription(t->lid, 0xF000);
 246:../../../mesh/app/ali_light/ali_light.c **** 		bc_m_mio_add_subscription(t->lid, ALI_GROUP_ADDRESS_LIGHT);
 562              		.loc 1 246 0 discriminator 3
 563 01ca C021     		movs	r1, #192
 564 01cc 3B01     		lsls	r3, r7, #4
 565 01ce E418     		adds	r4, r4, r3
 566              	.LVL49:
 567 01d0 5D34     		adds	r4, r4, #93
 568 01d2 0902     		lsls	r1, r1, #8
 569 01d4 2078     		ldrb	r0, [r4]
 570 01d6 FFF7FEFF 		bl	bc_m_mio_add_subscription
 571              	.LVL50:
 572              	.LBE19:
 243:../../../mesh/app/ali_light/ali_light.c **** 		mesh_model_t* t = &p_ali_light->model[i];
 573              		.loc 1 243 0 discriminator 3
 574 01da 0137     		adds	r7, r7, #1
 575              	.LVL51:
 576              	.LBB20:
 247:../../../mesh/app/ali_light/ali_light.c **** 		bc_m_mio_add_subscription(t->lid, ALI_GROUP_ADDRESS1);
 577              		.loc 1 247 0 discriminator 3
 578 01dc 2078     		ldrb	r0, [r4]
 579 01de 2349     		ldr	r1, .L49+12
 580 01e0 FFF7FEFF 		bl	bc_m_mio_add_subscription
 581              	.LVL52:
 582              	.LBE20:
 243:../../../mesh/app/ali_light/ali_light.c **** 		mesh_model_t* t = &p_ali_light->model[i];
 583              		.loc 1 243 0 discriminator 3
 584 01e4 FFB2     		uxtb	r7, r7
 585              	.LVL53:
 586 01e6 EAE7     		b	.L38
 587              	.L48:
 588              	.LBE18:
 248:../../../mesh/app/ali_light/ali_light.c **** 		
 249:../../../mesh/app/ali_light/ali_light.c **** 	}
 250:../../../mesh/app/ali_light/ali_light.c **** 	mesh_model_t* t = &p_ali_light->model[p_ali_light->model_cnt-1];
 251:../../../mesh/app/ali_light/ali_light.c **** 	bc_m_mio_add_subscription(t->lid, M_ALI_VENDER_ADDR);
 589              		.loc 1 251 0
 590 01e8 F021     		movs	r1, #240
 250:../../../mesh/app/ali_light/ali_light.c **** 	bc_m_mio_add_subscription(t->lid, M_ALI_VENDER_ADDR);
 591              		.loc 1 250 0
 592 01ea 013B     		subs	r3, r3, #1
 593              	.LVL54:
 594              		.loc 1 251 0
 595 01ec 1B01     		lsls	r3, r3, #4
 596              	.LVL55:
 597 01ee E418     		adds	r4, r4, r3
 598              	.LVL56:
 599 01f0 5D34     		adds	r4, r4, #93
 600 01f2 0902     		lsls	r1, r1, #8
 601 01f4 2078     		ldrb	r0, [r4]
 602 01f6 FFF7FEFF 		bl	bc_m_mio_add_subscription
 603              	.LVL57:
 252:../../../mesh/app/ali_light/ali_light.c **** 
 253:../../../mesh/app/ali_light/ali_light.c **** 	// Set publication parameters
 254:../../../mesh/app/ali_light/ali_light.c ****     status = bc_m_mio_set_publi_param(t->lid, M_ALI_VENDER_ADDR, NULL,
 604              		.loc 1 254 0
 605 01fa 8221     		movs	r1, #130
 606 01fc 2B78     		ldrb	r3, [r5]
 607 01fe 2078     		ldrb	r0, [r4]
 608 0200 0291     		str	r1, [sp, #8]
 609 0202 5A39     		subs	r1, r1, #90
 610 0204 0191     		str	r1, [sp, #4]
 611 0206 2239     		subs	r1, r1, #34
 612 0208 0022     		movs	r2, #0
 613 020a 0091     		str	r1, [sp]
 614 020c F021     		movs	r1, #240
 615 020e 0392     		str	r2, [sp, #12]
 616 0210 0902     		lsls	r1, r1, #8
 617 0212 FFF7FEFF 		bl	bc_m_mio_set_publi_param
 618              	.LVL58:
 255:../../../mesh/app/ali_light/ali_light.c ****                                       app_key_lid, M_ALI_PUBLISH_TTL, M_ALI_PUBLISH_PERIOD,
 256:../../../mesh/app/ali_light/ali_light.c ****                                      M_ALI_PUBLISH_RETX, 0);
 257:../../../mesh/app/ali_light/ali_light.c **** 	M_PRINTF(L_APP, "t->lid[%x] p_ali_light->model_cnt[%x] status[%x]",t->lid, p_ali_light->model_cnt,
 619              		.loc 1 257 0
 620 0216 134B     		ldr	r3, .L49+4
 254:../../../mesh/app/ali_light/ali_light.c ****                                       app_key_lid, M_ALI_PUBLISH_TTL, M_ALI_PUBLISH_PERIOD,
 621              		.loc 1 254 0
 622 0218 0700     		movs	r7, r0
 623              	.LVL59:
 624              		.loc 1 257 0
 625 021a 1B68     		ldr	r3, [r3]
 626 021c 9B04     		lsls	r3, r3, #18
 627 021e 1AD5     		bpl	.L40
 628              		.loc 1 257 0 is_stmt 0 discriminator 5
 629 0220 114D     		ldr	r5, .L49+8
 630 0222 2B00     		movs	r3, r5
 631 0224 6233     		adds	r3, r3, #98
 632 0226 0093     		str	r3, [sp]
 633 0228 2A00     		movs	r2, r5
 634 022a 2800     		movs	r0, r5
 635 022c 0223     		movs	r3, #2
 636 022e 2532     		adds	r2, r2, #37
 637 0230 FF33     		adds	r3, r3, #255
 638 0232 2900     		movs	r1, r5
 639 0234 3130     		adds	r0, r0, #49
 640 0236 FFF7FEFF 		bl	m_print
 641              	.LVL60:
 642 023a 3368     		ldr	r3, [r6]
 643 023c 0C48     		ldr	r0, .L49+16
 644 023e 5433     		adds	r3, r3, #84
 645 0240 1A78     		ldrb	r2, [r3]
 646 0242 2178     		ldrb	r1, [r4]
 647 0244 3B00     		movs	r3, r7
 648 0246 1230     		adds	r0, r0, #18
 649 0248 FFF7FEFF 		bl	m_print
 650              	.LVL61:
 651 024c 2800     		movs	r0, r5
 652 024e A91D     		adds	r1, r5, #6
 653 0250 5F30     		adds	r0, r0, #95
 654 0252 FFF7FEFF 		bl	m_print
 655              	.LVL62:
 656              	.L40:
 258:../../../mesh/app/ali_light/ali_light.c **** 
 259:../../../mesh/app/ali_light/ali_light.c **** #ifdef BREATH_CONFIG
 260:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.mode = BREATH_MODE_H2L2H;
 261:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.rCnt = 3;
 262:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.pCnt = REPEAT_COUNTER;
 263:../../../mesh/app/ali_light/ali_light.c **** 	led_cw_set_breath(&p_ali_light->breath);
 264:../../../mesh/app/ali_light/ali_light.c **** #endif
 265:../../../mesh/app/ali_light/ali_light.c **** 	_ready_to_indicate(true);
 657              		.loc 1 265 0 is_stmt 1
 658 0256 0120     		movs	r0, #1
 659 0258 FFF7D2FE 		bl	_ready_to_indicate
 660              	.LVL63:
 661              	.L31:
 266:../../../mesh/app/ali_light/ali_light.c **** 
 267:../../../mesh/app/ali_light/ali_light.c **** }
 662              		.loc 1 267 0
 663 025c 07B0     		add	sp, sp, #28
 664              		@ sp needed
 665 025e F0BD     		pop	{r4, r5, r6, r7, pc}
 666              	.L50:
 667              		.align	2
 668              	.L49:
 669 0260 00000000 		.word	.LANCHOR0
 670 0264 00000000 		.word	L_LEV
 671 0268 00000000 		.word	.LANCHOR1
 672 026c FFCF0000 		.word	53247
 673 0270 80000000 		.word	.LANCHOR2
 674              		.cfi_endproc
 675              	.LFE95:
 677              		.align	1
 678              		.code	16
 679              		.thumb_func
 681              	ali_light_period_ind_timer_cb:
 682              	.LFB96:
 268:../../../mesh/app/ali_light/ali_light.c **** 
 269:../../../mesh/app/ali_light/ali_light.c **** static void ali_light_period_ind_timer_cb(int param)
 270:../../../mesh/app/ali_light/ali_light.c **** {
 683              		.loc 1 270 0
 684              		.cfi_startproc
 685              		@ args = 0, pretend = 0, frame = 16
 686              		@ frame_needed = 0, uses_anonymous_args = 0
 687              	.LVL64:
 688 0274 7FB5     		push	{r0, r1, r2, r3, r4, r5, r6, lr}
 689              	.LCFI9:
 690              		.cfi_def_cfa_offset 32
 691              		.cfi_offset 0, -32
 692              		.cfi_offset 1, -28
 693              		.cfi_offset 2, -24
 694              		.cfi_offset 3, -20
 695              		.cfi_offset 4, -16
 696              		.cfi_offset 5, -12
 697              		.cfi_offset 6, -8
 698              		.cfi_offset 14, -4
 271:../../../mesh/app/ali_light/ali_light.c **** 	uint8_t data[12];
 272:../../../mesh/app/ali_light/ali_light.c **** 	
 273:../../../mesh/app/ali_light/ali_light.c **** 	int len = 1;
 274:../../../mesh/app/ali_light/ali_light.c **** 	data[0] = 0;
 699              		.loc 1 274 0
 700 0276 0026     		movs	r6, #0
 701 0278 01AD     		add	r5, sp, #4
 702 027a 2E70     		strb	r6, [r5]
 703              	.LBB21:
 704              	.LBB22:
  77:../../../mesh/app/ali_light/ali_light.c **** }
 705              		.loc 1 77 0
 706 027c FFF7FEFF 		bl	led_cw_get_on_off
 707              	.LVL65:
 708              	.LBE22:
 709              	.LBE21:
 275:../../../mesh/app/ali_light/ali_light.c **** 	len += bc_mm_alis_set_onoff_status(&data[len], ali_light_cw_get_on_off());
 710              		.loc 1 275 0
 711 0280 6B46     		mov	r3, sp
 712 0282 411E     		subs	r1, r0, #1
 713 0284 8841     		sbcs	r0, r0, r1
 714 0286 C1B2     		uxtb	r1, r0
 715 0288 581D     		adds	r0, r3, #5
 716 028a FFF7FEFF 		bl	bc_mm_alis_set_onoff_status
 717              	.LVL66:
 718 028e 441C     		adds	r4, r0, #1
 719              	.LVL67:
 720              	.LBB23:
 721              	.LBB24:
 100:../../../mesh/app/ali_light/ali_light.c **** }
 722              		.loc 1 100 0
 723 0290 FFF7FEFF 		bl	led_cw_get_lightness
 724              	.LVL68:
 725 0294 0100     		movs	r1, r0
 726              	.LBE24:
 727              	.LBE23:
 276:../../../mesh/app/ali_light/ali_light.c **** 	len += bc_mm_alis_set_ltn_status(&data[len], ali_light_cw_get_lightness());
 728              		.loc 1 276 0
 729 0296 2819     		adds	r0, r5, r4
 730 0298 FFF7FEFF 		bl	bc_mm_alis_set_ltn_status
 731              	.LVL69:
 732 029c 0419     		adds	r4, r0, r4
 733              	.LVL70:
 734              	.LBB25:
 735              	.LBB26:
 125:../../../mesh/app/ali_light/ali_light.c **** }
 736              		.loc 1 125 0
 737 029e FFF7FEFF 		bl	led_cw_get_temperature
 738              	.LVL71:
 739 02a2 0100     		movs	r1, r0
 740              	.LBE26:
 741              	.LBE25:
 277:../../../mesh/app/ali_light/ali_light.c **** 	len += bc_mm_alis_set_tmp_status(&data[len], ali_light_cw_get_temperature());
 742              		.loc 1 277 0
 743 02a4 2819     		adds	r0, r5, r4
 744 02a6 FFF7FEFF 		bl	bc_mm_alis_set_tmp_status
 745              	.LVL72:
 746 02aa 0419     		adds	r4, r0, r4
 747              	.LVL73:
 278:../../../mesh/app/ali_light/ali_light.c **** 	
 279:../../../mesh/app/ali_light/ali_light.c **** 	m_printf_hex(L_APP, "ali_light_period_ind_timer_cb", data, len);
 748              		.loc 1 279 0
 749 02ac 8020     		movs	r0, #128
 750 02ae 0B49     		ldr	r1, .L52
 751 02b0 2A00     		movs	r2, r5
 752 02b2 2300     		movs	r3, r4
 753 02b4 4331     		adds	r1, r1, #67
 754 02b6 8001     		lsls	r0, r0, #6
 755 02b8 FFF7FEFF 		bl	m_printf_hex
 756              	.LVL74:
 280:../../../mesh/app/ali_light/ali_light.c **** 	bc_mm_ali_vendor_send(p_ali_light->model[3].lid, MM_MSG_ALIS_ATTR_INDICATION, data, len);
 757              		.loc 1 280 0
 758 02bc 084A     		ldr	r2, .L52+4
 759 02be A3B2     		uxth	r3, r4
 760 02c0 1268     		ldr	r2, [r2]
 761 02c2 D421     		movs	r1, #212
 762 02c4 8D32     		adds	r2, r2, #141
 763 02c6 1078     		ldrb	r0, [r2]
 764 02c8 2A00     		movs	r2, r5
 765 02ca FFF7FEFF 		bl	bc_mm_ali_vendor_send
 766              	.LVL75:
 281:../../../mesh/app/ali_light/ali_light.c **** 	_ready_to_indicate(false);
 767              		.loc 1 281 0
 768 02ce 3000     		movs	r0, r6
 769 02d0 FFF796FE 		bl	_ready_to_indicate
 770              	.LVL76:
 282:../../../mesh/app/ali_light/ali_light.c **** 	bc_m_ali_save_seq_iv();
 283:../../../mesh/app/ali_light/ali_light.c **** }
 771              		.loc 1 283 0
 772              		@ sp needed
 282:../../../mesh/app/ali_light/ali_light.c **** 	bc_m_ali_save_seq_iv();
 773              		.loc 1 282 0
 774 02d4 FFF7FEFF 		bl	bc_m_ali_save_seq_iv
 775              	.LVL77:
 776              	.LVL78:
 777              		.loc 1 283 0
 778 02d8 7FBD     		pop	{r0, r1, r2, r3, r4, r5, r6, pc}
 779              	.L53:
 780 02da C046     		.align	2
 781              	.L52:
 782 02dc 80000000 		.word	.LANCHOR2
 783 02e0 00000000 		.word	.LANCHOR0
 784              		.cfi_endproc
 785              	.LFE96:
 787              		.align	1
 788              		.code	16
 789              		.thumb_func
 791              	ali_light_quick_restore_timer_cb:
 792              	.LFB97:
 284:../../../mesh/app/ali_light/ali_light.c **** 
 285:../../../mesh/app/ali_light/ali_light.c **** static void ali_light_quick_restore_timer_cb(void *t)
 286:../../../mesh/app/ali_light/ali_light.c **** {
 793              		.loc 1 286 0
 794              		.cfi_startproc
 795              		@ args = 0, pretend = 0, frame = 0
 796              		@ frame_needed = 0, uses_anonymous_args = 0
 797              	.LVL79:
 287:../../../mesh/app/ali_light/ali_light.c **** 	M_PRINTF(L_APP, "");
 798              		.loc 1 287 0
 799 02e4 164B     		ldr	r3, .L59
 286:../../../mesh/app/ali_light/ali_light.c **** 	M_PRINTF(L_APP, "");
 800              		.loc 1 286 0
 801 02e6 73B5     		push	{r0, r1, r4, r5, r6, lr}
 802              	.LCFI10:
 803              		.cfi_def_cfa_offset 24
 804              		.cfi_offset 0, -24
 805              		.cfi_offset 1, -20
 806              		.cfi_offset 4, -16
 807              		.cfi_offset 5, -12
 808              		.cfi_offset 6, -8
 809              		.cfi_offset 14, -4
 810              		.loc 1 287 0
 811 02e8 1B68     		ldr	r3, [r3]
 812 02ea 9B04     		lsls	r3, r3, #18
 813 02ec 15D5     		bpl	.L55
 814              		.loc 1 287 0 is_stmt 0 discriminator 5
 815 02ee 154B     		ldr	r3, .L59+4
 816 02f0 154C     		ldr	r4, .L59+8
 817 02f2 6133     		adds	r3, r3, #97
 818 02f4 0093     		str	r3, [sp]
 819 02f6 2200     		movs	r2, r4
 820 02f8 2000     		movs	r0, r4
 821              	.LVL80:
 822 02fa 2023     		movs	r3, #32
 823 02fc 2100     		movs	r1, r4
 824 02fe 2532     		adds	r2, r2, #37
 825 0300 FF33     		adds	r3, r3, #255
 826 0302 3130     		adds	r0, r0, #49
 827 0304 FFF7FEFF 		bl	m_print
 828              	.LVL81:
 829 0308 1048     		ldr	r0, .L59+12
 830 030a 0230     		adds	r0, r0, #2
 831 030c FFF7FEFF 		bl	m_print
 832              	.LVL82:
 833 0310 2000     		movs	r0, r4
 834 0312 A11D     		adds	r1, r4, #6
 835 0314 5F30     		adds	r0, r0, #95
 836 0316 FFF7FEFF 		bl	m_print
 837              	.LVL83:
 838              	.L55:
 288:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->quickTime = 0;
 839              		.loc 1 288 0 is_stmt 1
 840 031a 0024     		movs	r4, #0
 841 031c 0C4E     		ldr	r6, .L59+16
 289:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->saveCfgCrc = bc_sys_check_sum((uint8_t*)p_ali_light, ALI_LIGHT_SAVE_LEN-1);
 842              		.loc 1 289 0
 843 031e 0821     		movs	r1, #8
 288:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->quickTime = 0;
 844              		.loc 1 288 0
 845 0320 3568     		ldr	r5, [r6]
 290:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_erase(FLASH_ALI_START_ADDRRESS, 1);
 291:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_write(FLASH_ALI_START_ADDRRESS, ALI_LIGHT_SAVE_LEN,(uint8_t*)p_ali_light);
 292:../../../mesh/app/ali_light/ali_light.c **** }
 846              		.loc 1 292 0
 847              		@ sp needed
 288:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->saveCfgCrc = bc_sys_check_sum((uint8_t*)p_ali_light, ALI_LIGHT_SAVE_LEN-1);
 848              		.loc 1 288 0
 849 0322 2C70     		strb	r4, [r5]
 289:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->saveCfgCrc = bc_sys_check_sum((uint8_t*)p_ali_light, ALI_LIGHT_SAVE_LEN-1);
 850              		.loc 1 289 0
 851 0324 2800     		movs	r0, r5
 852 0326 FFF7FEFF 		bl	bc_sys_check_sum
 853              	.LVL84:
 290:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_erase(FLASH_ALI_START_ADDRRESS, 1);
 854              		.loc 1 290 0
 855 032a 0121     		movs	r1, #1
 289:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->saveCfgCrc = bc_sys_check_sum((uint8_t*)p_ali_light, ALI_LIGHT_SAVE_LEN-1);
 856              		.loc 1 289 0
 857 032c 2872     		strb	r0, [r5, #8]
 290:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_erase(FLASH_ALI_START_ADDRRESS, 1);
 858              		.loc 1 290 0
 859 032e 2000     		movs	r0, r4
 860 0330 FFF7FEFF 		bl	bc_flash_erase
 861              	.LVL85:
 291:../../../mesh/app/ali_light/ali_light.c **** }
 862              		.loc 1 291 0
 863 0334 3268     		ldr	r2, [r6]
 864 0336 0921     		movs	r1, #9
 865 0338 2000     		movs	r0, r4
 866 033a FFF7FEFF 		bl	bc_flash_write
 867              	.LVL86:
 868              		.loc 1 292 0
 869 033e 73BD     		pop	{r0, r1, r4, r5, r6, pc}
 870              	.L60:
 871              		.align	2
 872              	.L59:
 873 0340 00000000 		.word	L_LEV
 874 0344 80000000 		.word	.LANCHOR2
 875 0348 00000000 		.word	.LANCHOR1
 876 034c 00010000 		.word	.LANCHOR3
 877 0350 00000000 		.word	.LANCHOR0
 878              		.cfi_endproc
 879              	.LFE97:
 881              		.align	1
 882              		.global	ali_light_quick_restore_init
 883              		.code	16
 884              		.thumb_func
 886              	ali_light_quick_restore_init:
 887              	.LFB98:
 293:../../../mesh/app/ali_light/ali_light.c **** 
 294:../../../mesh/app/ali_light/ali_light.c **** uint8_t ali_light_quick_restore_init(void)
 295:../../../mesh/app/ali_light/ali_light.c **** {
 888              		.loc 1 295 0
 889              		.cfi_startproc
 890              		@ args = 0, pretend = 0, frame = 8
 891              		@ frame_needed = 0, uses_anonymous_args = 0
 892 0354 F0B5     		push	{r4, r5, r6, r7, lr}
 893              	.LCFI11:
 894              		.cfi_def_cfa_offset 20
 895              		.cfi_offset 4, -20
 896              		.cfi_offset 5, -16
 897              		.cfi_offset 6, -12
 898              		.cfi_offset 7, -8
 899              		.cfi_offset 14, -4
 296:../../../mesh/app/ali_light/ali_light.c **** 	if(p_ali_light->quickTime++ < ALI_QUICK_START_CNT){//0 1 2 3 4
 900              		.loc 1 296 0
 901 0356 354D     		ldr	r5, .L75
 295:../../../mesh/app/ali_light/ali_light.c **** 	if(p_ali_light->quickTime++ < ALI_QUICK_START_CNT){//0 1 2 3 4
 902              		.loc 1 295 0
 903 0358 85B0     		sub	sp, sp, #20
 904              	.LCFI12:
 905              		.cfi_def_cfa_offset 40
 906              		.loc 1 296 0
 907 035a 2C68     		ldr	r4, [r5]
 908 035c 2378     		ldrb	r3, [r4]
 909 035e 5A1C     		adds	r2, r3, #1
 910 0360 2270     		strb	r2, [r4]
 911 0362 042B     		cmp	r3, #4
 912 0364 0FD8     		bhi	.L62
 297:../../../mesh/app/ali_light/ali_light.c **** 		p_ali_light->saveCfgCrc = bc_sys_check_sum((uint8_t*)p_ali_light, ALI_LIGHT_SAVE_LEN-1);
 913              		.loc 1 297 0
 914 0366 0821     		movs	r1, #8
 915 0368 2000     		movs	r0, r4
 916 036a FFF7FEFF 		bl	bc_sys_check_sum
 917              	.LVL87:
 298:../../../mesh/app/ali_light/ali_light.c **** 		bc_flash_erase(FLASH_ALI_START_ADDRRESS, 1);
 918              		.loc 1 298 0
 919 036e 0121     		movs	r1, #1
 297:../../../mesh/app/ali_light/ali_light.c **** 		p_ali_light->saveCfgCrc = bc_sys_check_sum((uint8_t*)p_ali_light, ALI_LIGHT_SAVE_LEN-1);
 920              		.loc 1 297 0
 921 0370 2072     		strb	r0, [r4, #8]
 922              		.loc 1 298 0
 923 0372 0020     		movs	r0, #0
 924 0374 FFF7FEFF 		bl	bc_flash_erase
 925              	.LVL88:
 299:../../../mesh/app/ali_light/ali_light.c **** 		bc_flash_write(FLASH_ALI_START_ADDRRESS, ALI_LIGHT_SAVE_LEN,(uint8_t*)p_ali_light);
 926              		.loc 1 299 0
 927 0378 2A68     		ldr	r2, [r5]
 928 037a 0921     		movs	r1, #9
 929 037c 0020     		movs	r0, #0
 930 037e FFF7FEFF 		bl	bc_flash_write
 931              	.LVL89:
 300:../../../mesh/app/ali_light/ali_light.c **** 		return 0;
 932              		.loc 1 300 0
 933 0382 0020     		movs	r0, #0
 934 0384 4FE0     		b	.L63
 935              	.L62:
 301:../../../mesh/app/ali_light/ali_light.c **** 	}
 302:../../../mesh/app/ali_light/ali_light.c **** 	M_PRINTF(L_APP, "");
 936              		.loc 1 302 0
 937 0386 2A4B     		ldr	r3, .L75+4
 938 0388 1B68     		ldr	r3, [r3]
 939 038a 9B04     		lsls	r3, r3, #18
 940 038c 14D5     		bpl	.L64
 941              		.loc 1 302 0 is_stmt 0 discriminator 5
 942 038e 294D     		ldr	r5, .L75+8
 943 0390 294C     		ldr	r4, .L75+12
 944 0392 EB1C     		adds	r3, r5, #3
 945 0394 0093     		str	r3, [sp]
 946 0396 2200     		movs	r2, r4
 947 0398 2000     		movs	r0, r4
 948 039a 9723     		movs	r3, #151
 949 039c 2100     		movs	r1, r4
 950 039e 2532     		adds	r2, r2, #37
 951 03a0 5B00     		lsls	r3, r3, #1
 952 03a2 3130     		adds	r0, r0, #49
 953 03a4 FFF7FEFF 		bl	m_print
 954              	.LVL90:
 955 03a8 A81C     		adds	r0, r5, #2
 956 03aa FFF7FEFF 		bl	m_print
 957              	.LVL91:
 958 03ae 2000     		movs	r0, r4
 959 03b0 A11D     		adds	r1, r4, #6
 960 03b2 5F30     		adds	r0, r0, #95
 961 03b4 FFF7FEFF 		bl	m_print
 962              	.LVL92:
 963              	.L64:
 303:../../../mesh/app/ali_light/ali_light.c **** #ifdef BREATH_CONFIG
 304:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.mode = BREATH_MODE_FLOW;
 305:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.rCnt = 1;
 306:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.pCnt = REPEAT_COUNTER;
 307:../../../mesh/app/ali_light/ali_light.c **** 	led_cw_set_on_off(ALI_CW_ON, &p_ali_light->breath);
 308:../../../mesh/app/ali_light/ali_light.c **** #else
 309:../../../mesh/app/ali_light/ali_light.c **** 	//TODO: 1HZ flash 3 timers
 310:../../../mesh/app/ali_light/ali_light.c **** 	uint8_t i = 6;
 311:../../../mesh/app/ali_light/ali_light.c **** 	uint32_t t = mesh_timer_get_time();
 964              		.loc 1 311 0 is_stmt 1
 965 03b8 FFF7FEFF 		bl	mesh_timer_get_time
 966              	.LVL93:
 310:../../../mesh/app/ali_light/ali_light.c **** 	uint32_t t = mesh_timer_get_time();
 967              		.loc 1 310 0
 968 03bc 0624     		movs	r4, #6
 969              		.loc 1 311 0
 970 03be 0700     		movs	r7, r0
 971              	.LVL94:
 972              	.L65:
 312:../../../mesh/app/ali_light/ali_light.c **** 	do{
 313:../../../mesh/app/ali_light/ali_light.c **** 		while(mesh_timer_get_time()-t < ALI_QUICK_BLINK_TIME){//delay 1s
 973              		.loc 1 313 0
 974 03c0 FFF7FEFF 		bl	mesh_timer_get_time
 975              	.LVL95:
 976 03c4 1D4B     		ldr	r3, .L75+16
 977 03c6 C01B     		subs	r0, r0, r7
 978 03c8 9842     		cmp	r0, r3
 979 03ca F9D9     		bls	.L65
 314:../../../mesh/app/ali_light/ali_light.c **** 			continue;
 315:../../../mesh/app/ali_light/ali_light.c **** 		}
 316:../../../mesh/app/ali_light/ali_light.c **** 		t = mesh_timer_get_time();
 980              		.loc 1 316 0
 981 03cc FFF7FEFF 		bl	mesh_timer_get_time
 982              	.LVL96:
 983 03d0 0700     		movs	r7, r0
 984              	.LVL97:
 317:../../../mesh/app/ali_light/ali_light.c **** 		if(i == 1){
 985              		.loc 1 317 0
 986 03d2 012C     		cmp	r4, #1
 987 03d4 24D0     		beq	.L67
 318:../../../mesh/app/ali_light/ali_light.c **** 			break;
 319:../../../mesh/app/ali_light/ali_light.c **** 		}
 320:../../../mesh/app/ali_light/ali_light.c **** 		led_cw_set_on_off(i%2,NULL);
 988              		.loc 1 320 0
 989 03d6 0123     		movs	r3, #1
 990 03d8 2340     		ands	r3, r4
 991 03da 1800     		movs	r0, r3
 992              	.LVL98:
 993 03dc 0021     		movs	r1, #0
 994 03de 0393     		str	r3, [sp, #12]
 995 03e0 FFF7FEFF 		bl	led_cw_set_on_off
 996              	.LVL99:
 321:../../../mesh/app/ali_light/ali_light.c **** 		M_PRINTF(L_APP, "led status = %d", i%2);
 997              		.loc 1 321 0
 998 03e4 124B     		ldr	r3, .L75+4
 999 03e6 1B68     		ldr	r3, [r3]
 1000 03e8 9B04     		lsls	r3, r3, #18
 1001 03ea 16D5     		bpl	.L68
 1002              		.loc 1 321 0 is_stmt 0 discriminator 5
 1003 03ec 114E     		ldr	r6, .L75+8
 1004 03ee 124D     		ldr	r5, .L75+12
 1005 03f0 F31C     		adds	r3, r6, #3
 1006 03f2 0093     		str	r3, [sp]
 1007 03f4 2A00     		movs	r2, r5
 1008 03f6 2800     		movs	r0, r5
 1009 03f8 4223     		movs	r3, #66
 1010 03fa 2532     		adds	r2, r2, #37
 1011 03fc FF33     		adds	r3, r3, #255
 1012 03fe 2900     		movs	r1, r5
 1013 0400 3130     		adds	r0, r0, #49
 1014 0402 FFF7FEFF 		bl	m_print
 1015              	.LVL100:
 1016 0406 3000     		movs	r0, r6
 1017 0408 0399     		ldr	r1, [sp, #12]
 1018 040a 2030     		adds	r0, r0, #32
 1019 040c FFF7FEFF 		bl	m_print
 1020              	.LVL101:
 1021 0410 2800     		movs	r0, r5
 1022 0412 A91D     		adds	r1, r5, #6
 1023 0414 5F30     		adds	r0, r0, #95
 1024 0416 FFF7FEFF 		bl	m_print
 1025              	.LVL102:
 1026              	.L68:
 322:../../../mesh/app/ali_light/ali_light.c **** 	}while(i-->1);
 1027              		.loc 1 322 0 is_stmt 1
 1028 041a 013C     		subs	r4, r4, #1
 1029              	.LVL103:
 1030 041c E4B2     		uxtb	r4, r4
 1031              	.LVL104:
 1032 041e CFE7     		b	.L65
 1033              	.LVL105:
 1034              	.L67:
 323:../../../mesh/app/ali_light/ali_light.c **** #endif
 324:../../../mesh/app/ali_light/ali_light.c **** 	//restore flash parameter
 325:../../../mesh/app/ali_light/ali_light.c **** 	ali_light_factory_reset();
 1035              		.loc 1 325 0
 1036 0420 FFF7FEFF 		bl	ali_light_factory_reset
 1037              	.LVL106:
 326:../../../mesh/app/ali_light/ali_light.c **** 	return 1;
 1038              		.loc 1 326 0
 1039 0424 2000     		movs	r0, r4
 1040              	.LVL107:
 1041              	.L63:
 327:../../../mesh/app/ali_light/ali_light.c **** }
 1042              		.loc 1 327 0
 1043 0426 05B0     		add	sp, sp, #20
 1044              		@ sp needed
 1045 0428 F0BD     		pop	{r4, r5, r6, r7, pc}
 1046              	.L76:
 1047 042a C046     		.align	2
 1048              	.L75:
 1049 042c 00000000 		.word	.LANCHOR0
 1050 0430 00000000 		.word	L_LEV
 1051 0434 00010000 		.word	.LANCHOR3
 1052 0438 00000000 		.word	.LANCHOR1
 1053 043c E7030000 		.word	999
 1054              		.cfi_endproc
 1055              	.LFE98:
 1057              		.align	1
 1058              		.global	ali_light_prov_state_cb
 1059              		.code	16
 1060              		.thumb_func
 1062              	ali_light_prov_state_cb:
 1063              	.LFB99:
 328:../../../mesh/app/ali_light/ali_light.c **** 
 329:../../../mesh/app/ali_light/ali_light.c **** void ali_light_prov_state_cb(uint8_t state)
 330:../../../mesh/app/ali_light/ali_light.c **** {
 1064              		.loc 1 330 0
 1065              		.cfi_startproc
 1066              		@ args = 0, pretend = 0, frame = 0
 1067              		@ frame_needed = 0, uses_anonymous_args = 0
 1068              	.LVL108:
 1069 0440 10B5     		push	{r4, lr}
 1070              	.LCFI13:
 1071              		.cfi_def_cfa_offset 8
 1072              		.cfi_offset 4, -8
 1073              		.cfi_offset 14, -4
 331:../../../mesh/app/ali_light/ali_light.c **** #ifdef APP_FOR_ALI
 332:../../../mesh/app/ali_light/ali_light.c **** 	if(state == M_PROV_SUCCEED_APP){
 1074              		.loc 1 332 0
 1075 0442 0328     		cmp	r0, #3
 1076 0444 07D1     		bne	.L77
 333:../../../mesh/app/ali_light/ali_light.c **** 		SYS_SetTimer(&p_ali_light->bindDelayTimer, (int)500/10, 
 1077              		.loc 1 333 0
 1078 0446 044B     		ldr	r3, .L79
 1079 0448 0022     		movs	r2, #0
 1080 044a 1868     		ldr	r0, [r3]
 1081              	.LVL109:
 1082 044c 3221     		movs	r1, #50
 1083 044e 2430     		adds	r0, r0, #36
 1084 0450 024B     		ldr	r3, .L79+4
 1085 0452 FFF7FEFF 		bl	SYS_SetTimer
 1086              	.LVL110:
 1087              	.L77:
 334:../../../mesh/app/ali_light/ali_light.c **** 					TIMER_SINGLE, (Timer_Expire_CB)ali_light_bind_timer_cb);
 335:../../../mesh/app/ali_light/ali_light.c **** 		return;
 336:../../../mesh/app/ali_light/ali_light.c **** 	}
 337:../../../mesh/app/ali_light/ali_light.c **** #endif 
 338:../../../mesh/app/ali_light/ali_light.c **** }
 1088              		.loc 1 338 0
 1089              		@ sp needed
 1090 0456 10BD     		pop	{r4, pc}
 1091              	.L80:
 1092              		.align	2
 1093              	.L79:
 1094 0458 00000000 		.word	.LANCHOR0
 1095 045c 00000000 		.word	ali_light_bind_timer_cb
 1096              		.cfi_endproc
 1097              	.LFE99:
 1099              		.align	1
 1100              		.global	ali_light_prov_state_get
 1101              		.code	16
 1102              		.thumb_func
 1104              	ali_light_prov_state_get:
 1105              	.LFB100:
 339:../../../mesh/app/ali_light/ali_light.c **** 
 340:../../../mesh/app/ali_light/ali_light.c **** uint8_t ali_light_prov_state_get(void)
 341:../../../mesh/app/ali_light/ali_light.c **** {
 1106              		.loc 1 341 0
 1107              		.cfi_startproc
 1108              		@ args = 0, pretend = 0, frame = 0
 1109              		@ frame_needed = 0, uses_anonymous_args = 0
 342:../../../mesh/app/ali_light/ali_light.c **** 	M_PRINTF(L_APP, "bond status[%d]", p_ali_light->provState);
 1110              		.loc 1 342 0
 1111 0460 124B     		ldr	r3, .L86
 341:../../../mesh/app/ali_light/ali_light.c **** 	M_PRINTF(L_APP, "bond status[%d]", p_ali_light->provState);
 1112              		.loc 1 341 0
 1113 0462 73B5     		push	{r0, r1, r4, r5, r6, lr}
 1114              	.LCFI14:
 1115              		.cfi_def_cfa_offset 24
 1116              		.cfi_offset 0, -24
 1117              		.cfi_offset 1, -20
 1118              		.cfi_offset 4, -16
 1119              		.cfi_offset 5, -12
 1120              		.cfi_offset 6, -8
 1121              		.cfi_offset 14, -4
 1122              		.loc 1 342 0
 1123 0464 1B68     		ldr	r3, [r3]
 1124 0466 124E     		ldr	r6, .L86+4
 1125 0468 9B04     		lsls	r3, r3, #18
 1126 046a 18D5     		bpl	.L82
 1127              		.loc 1 342 0 is_stmt 0 discriminator 5
 1128 046c 114D     		ldr	r5, .L86+8
 1129 046e 124C     		ldr	r4, .L86+12
 1130 0470 2B00     		movs	r3, r5
 1131 0472 3033     		adds	r3, r3, #48
 1132 0474 0093     		str	r3, [sp]
 1133 0476 2200     		movs	r2, r4
 1134 0478 2000     		movs	r0, r4
 1135 047a AB23     		movs	r3, #171
 1136 047c 2532     		adds	r2, r2, #37
 1137 047e 5B00     		lsls	r3, r3, #1
 1138 0480 2100     		movs	r1, r4
 1139 0482 3130     		adds	r0, r0, #49
 1140 0484 FFF7FEFF 		bl	m_print
 1141              	.LVL111:
 1142 0488 2800     		movs	r0, r5
 1143 048a 3368     		ldr	r3, [r6]
 1144 048c 4930     		adds	r0, r0, #73
 1145 048e 5978     		ldrb	r1, [r3, #1]
 1146 0490 FFF7FEFF 		bl	m_print
 1147              	.LVL112:
 1148 0494 2000     		movs	r0, r4
 1149 0496 A11D     		adds	r1, r4, #6
 1150 0498 5F30     		adds	r0, r0, #95
 1151 049a FFF7FEFF 		bl	m_print
 1152              	.LVL113:
 1153              	.L82:
 343:../../../mesh/app/ali_light/ali_light.c **** 	return p_ali_light->provState == 1;
 1154              		.loc 1 343 0 is_stmt 1
 1155 049e 3368     		ldr	r3, [r6]
 344:../../../mesh/app/ali_light/ali_light.c **** }
 1156              		.loc 1 344 0
 1157              		@ sp needed
 343:../../../mesh/app/ali_light/ali_light.c **** 	return p_ali_light->provState == 1;
 1158              		.loc 1 343 0
 1159 04a0 5878     		ldrb	r0, [r3, #1]
 1160 04a2 0138     		subs	r0, r0, #1
 1161 04a4 4242     		rsbs	r2, r0, #0
 1162 04a6 4241     		adcs	r2, r2, r0
 1163 04a8 D0B2     		uxtb	r0, r2
 1164              		.loc 1 344 0
 1165 04aa 76BD     		pop	{r1, r2, r4, r5, r6, pc}
 1166              	.L87:
 1167              		.align	2
 1168              	.L86:
 1169 04ac 00000000 		.word	L_LEV
 1170 04b0 00000000 		.word	.LANCHOR0
 1171 04b4 00010000 		.word	.LANCHOR3
 1172 04b8 00000000 		.word	.LANCHOR1
 1173              		.cfi_endproc
 1174              	.LFE100:
 1176              		.align	1
 1177              		.global	ali_light_factory_reset
 1178              		.code	16
 1179              		.thumb_func
 1181              	ali_light_factory_reset:
 1182              	.LFB101:
 345:../../../mesh/app/ali_light/ali_light.c **** 
 346:../../../mesh/app/ali_light/ali_light.c **** void ali_light_factory_reset()
 347:../../../mesh/app/ali_light/ali_light.c **** {
 1183              		.loc 1 347 0
 1184              		.cfi_startproc
 1185              		@ args = 0, pretend = 0, frame = 0
 1186              		@ frame_needed = 0, uses_anonymous_args = 0
 1187 04bc 10B5     		push	{r4, lr}
 1188              	.LCFI15:
 1189              		.cfi_def_cfa_offset 8
 1190              		.cfi_offset 4, -8
 1191              		.cfi_offset 14, -4
 348:../../../mesh/app/ali_light/ali_light.c **** #ifdef BREATH_CONFIG
 349:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.mode = BREATH_MODE_H2L2H;
 350:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.rCnt = 5;
 351:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.pCnt = REPEAT_COUNTER;
 352:../../../mesh/app/ali_light/ali_light.c **** 	led_cw_set_breath(&p_ali_light->breath);
 353:../../../mesh/app/ali_light/ali_light.c **** #endif
 354:../../../mesh/app/ali_light/ali_light.c **** 
 355:../../../mesh/app/ali_light/ali_light.c **** 	bc_m_clear_config();
 1192              		.loc 1 355 0
 1193 04be FFF7FEFF 		bl	bc_m_clear_config
 1194              	.LVL114:
 356:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_erase(FLASH_ALI_START_ADDRRESS, FLASH_ALI_USED_PAGE_SIZE);
 1195              		.loc 1 356 0
 1196 04c2 0221     		movs	r1, #2
 1197 04c4 0020     		movs	r0, #0
 1198 04c6 FFF7FEFF 		bl	bc_flash_erase
 1199              	.LVL115:
 357:../../../mesh/app/ali_light/ali_light.c **** 	
 358:../../../mesh/app/ali_light/ali_light.c **** 	bc_sys_reset();
 359:../../../mesh/app/ali_light/ali_light.c **** }
 1200              		.loc 1 359 0
 1201              		@ sp needed
 358:../../../mesh/app/ali_light/ali_light.c **** }
 1202              		.loc 1 358 0
 1203 04ca FFF7FEFF 		bl	bc_sys_reset
 1204              	.LVL116:
 1205              		.loc 1 359 0
 1206 04ce 10BD     		pop	{r4, pc}
 1207              		.cfi_endproc
 1208              	.LFE101:
 1210              		.align	1
 1211              		.code	16
 1212              		.thumb_func
 1214              	_reload_defalut_param:
 1215              	.LFB102:
 360:../../../mesh/app/ali_light/ali_light.c **** #ifdef FOR_ALI_TEST
 361:../../../mesh/app/ali_light/ali_light.c **** static void ali_light_key_timer_cb(void* param)
 362:../../../mesh/app/ali_light/ali_light.c **** {
 363:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->key_pre = p_ali_light->key_next;
 364:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->key_next = bc_gpio_get(GPIO_PWM1);
 365:../../../mesh/app/ali_light/ali_light.c **** 	if(p_ali_light->key_next == 1 && p_ali_light->key_pre == 0){
 366:../../../mesh/app/ali_light/ali_light.c **** 		ali_light_cw_set_on_off(!ali_light_cw_get_on_off());
 367:../../../mesh/app/ali_light/ali_light.c **** 		//use vedor to indicate
 368:../../../mesh/app/ali_light/ali_light.c **** 		_ready_to_indicate(true);
 369:../../../mesh/app/ali_light/ali_light.c **** 	}
 370:../../../mesh/app/ali_light/ali_light.c **** 	enable_intr(GPIO6_intr);
 371:../../../mesh/app/ali_light/ali_light.c **** }
 372:../../../mesh/app/ali_light/ali_light.c **** void gpio6_handler(void)
 373:../../../mesh/app/ali_light/ali_light.c **** {
 374:../../../mesh/app/ali_light/ali_light.c **** 	//printf("gpio6_handler\r\n");
 375:../../../mesh/app/ali_light/ali_light.c **** 	//start enable irq timer
 376:../../../mesh/app/ali_light/ali_light.c **** 	disable_intr(GPIO6_intr);
 377:../../../mesh/app/ali_light/ali_light.c **** 	SYS_SetTimer(&p_ali_light->keyTimer, (int)200/10, 
 378:../../../mesh/app/ali_light/ali_light.c **** 					TIMER_SINGLE, (Timer_Expire_CB)ali_light_key_timer_cb);
 379:../../../mesh/app/ali_light/ali_light.c **** }
 380:../../../mesh/app/ali_light/ali_light.c **** void ali_light_key_init()
 381:../../../mesh/app/ali_light/ali_light.c **** {
 382:../../../mesh/app/ali_light/ali_light.c **** 	GPIO_CFG cfg;
 383:../../../mesh/app/ali_light/ali_light.c **** 	cfg.pin_func = FUNC_INPUT;
 384:../../../mesh/app/ali_light/ali_light.c **** 	cfg.pin_cfg = GFG_PULLDOWN;
 385:../../../mesh/app/ali_light/ali_light.c **** 	bc_gpio_init(GPIO_PWM1, &cfg);
 386:../../../mesh/app/ali_light/ali_light.c **** 
 387:../../../mesh/app/ali_light/ali_light.c **** 	enable_intr(GPIO6_intr);
 388:../../../mesh/app/ali_light/ali_light.c **** 
 389:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->key_pre = 0;
 390:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->key_next = 0;
 391:../../../mesh/app/ali_light/ali_light.c **** }
 392:../../../mesh/app/ali_light/ali_light.c **** #endif
 393:../../../mesh/app/ali_light/ali_light.c **** static void _reload_defalut_param()
 394:../../../mesh/app/ali_light/ali_light.c **** {
 1216              		.loc 1 394 0
 1217              		.cfi_startproc
 1218              		@ args = 0, pretend = 0, frame = 0
 1219              		@ frame_needed = 0, uses_anonymous_args = 0
 1220 04d0 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1221              	.LCFI16:
 1222              		.cfi_def_cfa_offset 24
 1223              		.cfi_offset 3, -24
 1224              		.cfi_offset 4, -20
 1225              		.cfi_offset 5, -16
 1226              		.cfi_offset 6, -12
 1227              		.cfi_offset 7, -8
 1228              		.cfi_offset 14, -4
 395:../../../mesh/app/ali_light/ali_light.c **** 	memset((uint8_t*)p_ali_light, 0, ALI_LIGHT_SAVE_LEN);
 1229              		.loc 1 395 0
 1230 04d2 0926     		movs	r6, #9
 1231 04d4 104D     		ldr	r5, .L90
 1232 04d6 3200     		movs	r2, r6
 1233 04d8 2C68     		ldr	r4, [r5]
 1234 04da 0021     		movs	r1, #0
 1235 04dc 2000     		movs	r0, r4
 1236 04de FFF7FEFF 		bl	memset
 1237              	.LVL117:
 396:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->dType = ali_config_device_type_get();
 1238              		.loc 1 396 0
 1239 04e2 FFF7FEFF 		bl	ali_config_device_type_get
 1240              	.LVL118:
 397:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->on = ALI_DEFAULT_ON_VAL;
 398:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->ln = ALI_DEFAULT_LN_VAL;
 1241              		.loc 1 398 0
 1242 04e6 2423     		movs	r3, #36
 397:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->on = ALI_DEFAULT_ON_VAL;
 1243              		.loc 1 397 0
 1244 04e8 0127     		movs	r7, #1
 396:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->dType = ali_config_device_type_get();
 1245              		.loc 1 396 0
 1246 04ea A070     		strb	r0, [r4, #2]
 397:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->on = ALI_DEFAULT_ON_VAL;
 1247              		.loc 1 397 0
 1248 04ec 2C68     		ldr	r4, [r5]
 1249              		.loc 1 398 0
 1250 04ee 5B42     		rsbs	r3, r3, #0
 1251 04f0 E380     		strh	r3, [r4, #6]
 399:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->tp = ALI_DEFAULT_TP_VAL;
 1252              		.loc 1 399 0
 1253 04f2 0A4B     		ldr	r3, .L90+4
 397:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->on = ALI_DEFAULT_ON_VAL;
 1254              		.loc 1 397 0
 1255 04f4 E770     		strb	r7, [r4, #3]
 1256              		.loc 1 399 0
 1257 04f6 A380     		strh	r3, [r4, #4]
 400:../../../mesh/app/ali_light/ali_light.c **** 	#if (LIGHT_CW_WITH_RGB)
 401:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->r = ALI_DEFAULT_R_VAL;
 402:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->g = ALI_DEFAULT_G_VAL;
 403:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->b = ALI_DEFAULT_B_VAL;
 404:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->lmode = 0;
 405:../../../mesh/app/ali_light/ali_light.c **** 	#endif
 406:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->saveCfgCrc = bc_sys_check_sum((uint8_t*)p_ali_light, ALI_LIGHT_SAVE_LEN-1);
 1258              		.loc 1 406 0
 1259 04f8 0821     		movs	r1, #8
 1260 04fa 2000     		movs	r0, r4
 1261 04fc FFF7FEFF 		bl	bc_sys_check_sum
 1262              	.LVL119:
 407:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_erase(FLASH_ALI_START_ADDRRESS, 1);
 1263              		.loc 1 407 0
 1264 0500 3900     		movs	r1, r7
 406:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_erase(FLASH_ALI_START_ADDRRESS, 1);
 1265              		.loc 1 406 0
 1266 0502 2072     		strb	r0, [r4, #8]
 1267              		.loc 1 407 0
 1268 0504 0020     		movs	r0, #0
 1269 0506 FFF7FEFF 		bl	bc_flash_erase
 1270              	.LVL120:
 408:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_write(FLASH_ALI_START_ADDRRESS, ALI_LIGHT_SAVE_LEN,(uint8_t*)p_ali_light);
 1271              		.loc 1 408 0
 1272 050a 2A68     		ldr	r2, [r5]
 1273 050c 3100     		movs	r1, r6
 1274 050e 0020     		movs	r0, #0
 1275 0510 FFF7FEFF 		bl	bc_flash_write
 1276              	.LVL121:
 409:../../../mesh/app/ali_light/ali_light.c **** }
 1277              		.loc 1 409 0
 1278              		@ sp needed
 1279 0514 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1280              	.L91:
 1281 0516 C046     		.align	2
 1282              	.L90:
 1283 0518 00000000 		.word	.LANCHOR0
 1284 051c A0280000 		.word	10400
 1285              		.cfi_endproc
 1286              	.LFE102:
 1288              		.align	1
 1289              		.global	ali_light_param_init
 1290              		.code	16
 1291              		.thumb_func
 1293              	ali_light_param_init:
 1294              	.LFB103:
 410:../../../mesh/app/ali_light/ali_light.c **** uint8_t ali_light_param_init()
 411:../../../mesh/app/ali_light/ali_light.c **** {
 1295              		.loc 1 411 0
 1296              		.cfi_startproc
 1297              		@ args = 0, pretend = 0, frame = 24
 1298              		@ frame_needed = 0, uses_anonymous_args = 0
 1299 0520 F0B5     		push	{r4, r5, r6, r7, lr}
 1300              	.LCFI17:
 1301              		.cfi_def_cfa_offset 20
 1302              		.cfi_offset 4, -20
 1303              		.cfi_offset 5, -16
 1304              		.cfi_offset 6, -12
 1305              		.cfi_offset 7, -8
 1306              		.cfi_offset 14, -4
 412:../../../mesh/app/ali_light/ali_light.c **** 	memset(p_ali_light, 0, sizeof(ali_light_t));
 1307              		.loc 1 412 0
 1308 0522 2C4C     		ldr	r4, .L105
 411:../../../mesh/app/ali_light/ali_light.c **** 	memset(p_ali_light, 0, sizeof(ali_light_t));
 1309              		.loc 1 411 0
 1310 0524 89B0     		sub	sp, sp, #36
 1311              	.LCFI18:
 1312              		.cfi_def_cfa_offset 56
 1313              		.loc 1 412 0
 1314 0526 2568     		ldr	r5, [r4]
 1315 0528 BC22     		movs	r2, #188
 1316 052a 0021     		movs	r1, #0
 1317 052c 2800     		movs	r0, r5
 1318 052e FFF7FEFF 		bl	memset
 1319              	.LVL122:
 413:../../../mesh/app/ali_light/ali_light.c **** 	//read saved parameter
 414:../../../mesh/app/ali_light/ali_light.c **** 	bc_flash_read(FLASH_ALI_START_ADDRRESS, ALI_LIGHT_SAVE_LEN,(uint8_t*)p_ali_light);
 1320              		.loc 1 414 0
 1321 0532 2A00     		movs	r2, r5
 1322 0534 0921     		movs	r1, #9
 1323 0536 0020     		movs	r0, #0
 1324 0538 FFF7FEFF 		bl	bc_flash_read
 1325              	.LVL123:
 415:../../../mesh/app/ali_light/ali_light.c **** 	uint8_t tCrc = bc_sys_check_sum((uint8_t*)p_ali_light, ALI_LIGHT_SAVE_LEN-1);
 1326              		.loc 1 415 0
 1327 053c 0821     		movs	r1, #8
 1328 053e 2068     		ldr	r0, [r4]
 1329 0540 FFF7FEFF 		bl	bc_sys_check_sum
 1330              	.LVL124:
 416:../../../mesh/app/ali_light/ali_light.c **** 	if(p_ali_light->saveCfgCrc != tCrc){
 1331              		.loc 1 416 0
 1332 0544 2368     		ldr	r3, [r4]
 1333 0546 1A7A     		ldrb	r2, [r3, #8]
 1334 0548 8242     		cmp	r2, r0
 1335 054a 27D1     		bne	.L104
 417:../../../mesh/app/ali_light/ali_light.c **** 		_reload_defalut_param();
 418:../../../mesh/app/ali_light/ali_light.c **** 	}else{
 419:../../../mesh/app/ali_light/ali_light.c **** 		if(p_ali_light->dType != ali_config_device_type_get()){//change device type
 1336              		.loc 1 419 0
 1337 054c 9D78     		ldrb	r5, [r3, #2]
 1338 054e FFF7FEFF 		bl	ali_config_device_type_get
 1339              	.LVL125:
 1340 0552 8542     		cmp	r5, r0
 1341 0554 24D0     		beq	.L94
 420:../../../mesh/app/ali_light/ali_light.c **** 			M_PRINTF(L_APP, "device type is changed [%d] to [%d]", p_ali_light->dType, ali_config_device_typ
 1342              		.loc 1 420 0
 1343 0556 204B     		ldr	r3, .L105+4
 1344 0558 1B68     		ldr	r3, [r3]
 1345 055a 9B04     		lsls	r3, r3, #18
 1346 055c 1CD5     		bpl	.L95
 1347              		.loc 1 420 0 is_stmt 0 discriminator 5
 1348 055e 1F4E     		ldr	r6, .L105+8
 1349 0560 1F4D     		ldr	r5, .L105+12
 1350 0562 3300     		movs	r3, r6
 1351 0564 5933     		adds	r3, r3, #89
 1352 0566 0093     		str	r3, [sp]
 1353 0568 2A00     		movs	r2, r5
 1354 056a 2800     		movs	r0, r5
 1355 056c D223     		movs	r3, #210
 1356 056e 2532     		adds	r2, r2, #37
 1357 0570 2900     		movs	r1, r5
 1358 0572 5B00     		lsls	r3, r3, #1
 1359 0574 3130     		adds	r0, r0, #49
 1360 0576 FFF7FEFF 		bl	m_print
 1361              	.LVL126:
 1362 057a 2368     		ldr	r3, [r4]
 1363 057c 9F78     		ldrb	r7, [r3, #2]
 1364 057e FFF7FEFF 		bl	ali_config_device_type_get
 1365              	.LVL127:
 1366 0582 0200     		movs	r2, r0
 1367 0584 3000     		movs	r0, r6
 1368 0586 3900     		movs	r1, r7
 1369 0588 6E30     		adds	r0, r0, #110
 1370 058a FFF7FEFF 		bl	m_print
 1371              	.LVL128:
 1372 058e 2800     		movs	r0, r5
 1373 0590 A91D     		adds	r1, r5, #6
 1374 0592 5F30     		adds	r0, r0, #95
 1375 0594 FFF7FEFF 		bl	m_print
 1376              	.LVL129:
 1377              	.L95:
 421:../../../mesh/app/ali_light/ali_light.c **** 			bc_m_clear_config();
 1378              		.loc 1 421 0 is_stmt 1
 1379 0598 FFF7FEFF 		bl	bc_m_clear_config
 1380              	.LVL130:
 1381              	.L104:
 422:../../../mesh/app/ali_light/ali_light.c **** 			_reload_defalut_param();
 1382              		.loc 1 422 0
 1383 059c FFF798FF 		bl	_reload_defalut_param
 1384              	.LVL131:
 1385              	.L94:
 1386              	.LBB29:
 1387              	.LBB30:
  37:../../../mesh/app/ali_light/ali_light.c **** 		return;
 1388              		.loc 1 37 0
 1389 05a0 2379     		ldrb	r3, [r4, #4]
 1390 05a2 012B     		cmp	r3, #1
 1391 05a4 12D0     		beq	.L97
  39:../../../mesh/app/ali_light/ali_light.c **** #ifdef BREATH_CONFIG
 1392              		.loc 1 39 0
 1393 05a6 0126     		movs	r6, #1
  46:../../../mesh/app/ali_light/ali_light.c **** 					.ln = ALI_DEFAULT_LN_VAL,
 1394              		.loc 1 46 0
 1395 05a8 03AD     		add	r5, sp, #12
 1396 05aa 1422     		movs	r2, #20
 1397 05ac 0021     		movs	r1, #0
 1398 05ae 2800     		movs	r0, r5
  39:../../../mesh/app/ali_light/ali_light.c **** #ifdef BREATH_CONFIG
 1399              		.loc 1 39 0
 1400 05b0 2671     		strb	r6, [r4, #4]
  46:../../../mesh/app/ali_light/ali_light.c **** 					.ln = ALI_DEFAULT_LN_VAL,
 1401              		.loc 1 46 0
 1402 05b2 FFF7FEFF 		bl	memset
 1403              	.LVL132:
 1404 05b6 0B4B     		ldr	r3, .L105+16
 1405 05b8 2E72     		strb	r6, [r5, #8]
 1406 05ba AB80     		strh	r3, [r5, #4]
  51:../../../mesh/app/ali_light/ali_light.c **** 	t.ln = p_ali_light->ln;
 1407              		.loc 1 51 0
 1408 05bc 2368     		ldr	r3, [r4]
  61:../../../mesh/app/ali_light/ali_light.c **** }
 1409              		.loc 1 61 0
 1410 05be 2800     		movs	r0, r5
  51:../../../mesh/app/ali_light/ali_light.c **** 	t.ln = p_ali_light->ln;
 1411              		.loc 1 51 0
 1412 05c0 9A88     		ldrh	r2, [r3, #4]
 1413 05c2 EA81     		strh	r2, [r5, #14]
  52:../../../mesh/app/ali_light/ali_light.c **** #if (LIGHT_CW_WITH_RGB)
 1414              		.loc 1 52 0
 1415 05c4 DB88     		ldrh	r3, [r3, #6]
 1416 05c6 6B81     		strh	r3, [r5, #10]
  61:../../../mesh/app/ali_light/ali_light.c **** }
 1417              		.loc 1 61 0
 1418 05c8 FFF7FEFF 		bl	led_cw_init
 1419              	.LVL133:
 1420              	.L97:
 1421              	.LBE30:
 1422              	.LBE29:
 423:../../../mesh/app/ali_light/ali_light.c **** 		}
 424:../../../mesh/app/ali_light/ali_light.c **** 	}
 425:../../../mesh/app/ali_light/ali_light.c **** 
 426:../../../mesh/app/ali_light/ali_light.c **** 	_light_cw_init();
 427:../../../mesh/app/ali_light/ali_light.c **** 	return 0;
 428:../../../mesh/app/ali_light/ali_light.c **** }
 1423              		.loc 1 428 0
 1424 05cc 0020     		movs	r0, #0
 1425 05ce 09B0     		add	sp, sp, #36
 1426              		@ sp needed
 1427 05d0 F0BD     		pop	{r4, r5, r6, r7, pc}
 1428              	.L106:
 1429 05d2 C046     		.align	2
 1430              	.L105:
 1431 05d4 00000000 		.word	.LANCHOR0
 1432 05d8 00000000 		.word	L_LEV
 1433 05dc 00010000 		.word	.LANCHOR3
 1434 05e0 00000000 		.word	.LANCHOR1
 1435 05e4 E02E0000 		.word	12000
 1436              		.cfi_endproc
 1437              	.LFE103:
 1439              		.align	1
 1440              		.code	16
 1441              		.thumb_func
 1443              	_ali_vendor_rx_cb:
 1444              	.LFB104:
 429:../../../mesh/app/ali_light/ali_light.c **** 
 430:../../../mesh/app/ali_light/ali_light.c **** static void _ali_vendor_rx_cb(const m_lid_t model_lid, const uint8_t opcode, const uint8_t* data, c
 431:../../../mesh/app/ali_light/ali_light.c **** {
 1445              		.loc 1 431 0
 1446              		.cfi_startproc
 1447              		@ args = 0, pretend = 0, frame = 8
 1448              		@ frame_needed = 0, uses_anonymous_args = 0
 1449              	.LVL134:
 1450 05e8 F0B5     		push	{r4, r5, r6, r7, lr}
 1451              	.LCFI19:
 1452              		.cfi_def_cfa_offset 20
 1453              		.cfi_offset 4, -20
 1454              		.cfi_offset 5, -16
 1455              		.cfi_offset 6, -12
 1456              		.cfi_offset 7, -8
 1457              		.cfi_offset 14, -4
 1458 05ea 1E00     		movs	r6, r3
 432:../../../mesh/app/ali_light/ali_light.c **** 	if(model_lid != p_ali_light->model[3].lid){
 1459              		.loc 1 432 0
 1460 05ec 244B     		ldr	r3, .L120
 1461              	.LVL135:
 431:../../../mesh/app/ali_light/ali_light.c **** 	if(model_lid != p_ali_light->model[3].lid){
 1462              		.loc 1 431 0
 1463 05ee 85B0     		sub	sp, sp, #20
 1464              	.LCFI20:
 1465              		.cfi_def_cfa_offset 40
 1466              		.loc 1 432 0
 1467 05f0 1B68     		ldr	r3, [r3]
 431:../../../mesh/app/ali_light/ali_light.c **** 	if(model_lid != p_ali_light->model[3].lid){
 1468              		.loc 1 431 0
 1469 05f2 0F00     		movs	r7, r1
 1470              		.loc 1 432 0
 1471 05f4 8D33     		adds	r3, r3, #141
 1472 05f6 1B78     		ldrb	r3, [r3]
 431:../../../mesh/app/ali_light/ali_light.c **** 	if(model_lid != p_ali_light->model[3].lid){
 1473              		.loc 1 431 0
 1474 05f8 1500     		movs	r5, r2
 1475              		.loc 1 432 0
 1476 05fa 0393     		str	r3, [sp, #12]
 1477 05fc 8342     		cmp	r3, r0
 1478 05fe 3CD1     		bne	.L107
 1479              	.LVL136:
 1480              	.LBB36:
 1481              	.LBB37:
 433:../../../mesh/app/ali_light/ali_light.c **** 		return;
 434:../../../mesh/app/ali_light/ali_light.c **** 	}
 435:../../../mesh/app/ali_light/ali_light.c **** 	M_PRINTF(L_APP, "opcode[%x]", opcode);
 1482              		.loc 1 435 0
 1483 0600 204B     		ldr	r3, .L120+4
 1484 0602 1B68     		ldr	r3, [r3]
 1485 0604 9B04     		lsls	r3, r3, #18
 1486 0606 16D5     		bpl	.L110
 1487 0608 1F4B     		ldr	r3, .L120+8
 1488 060a 204C     		ldr	r4, .L120+12
 1489 060c 1233     		adds	r3, r3, #18
 1490 060e 0093     		str	r3, [sp]
 1491 0610 2200     		movs	r2, r4
 1492              	.LVL137:
 1493 0612 2000     		movs	r0, r4
 1494              	.LVL138:
 1495 0614 B423     		movs	r3, #180
 1496 0616 2532     		adds	r2, r2, #37
 1497 0618 FF33     		adds	r3, r3, #255
 1498 061a 2100     		movs	r1, r4
 1499              	.LVL139:
 1500 061c 3130     		adds	r0, r0, #49
 1501 061e FFF7FEFF 		bl	m_print
 1502              	.LVL140:
 1503 0622 1948     		ldr	r0, .L120+8
 1504 0624 3900     		movs	r1, r7
 1505 0626 2430     		adds	r0, r0, #36
 1506 0628 FFF7FEFF 		bl	m_print
 1507              	.LVL141:
 1508 062c 2000     		movs	r0, r4
 1509 062e A11D     		adds	r1, r4, #6
 1510 0630 5F30     		adds	r0, r0, #95
 1511 0632 FFF7FEFF 		bl	m_print
 1512              	.LVL142:
 1513              	.L110:
 1514 0636 1449     		ldr	r1, .L120+8
 436:../../../mesh/app/ali_light/ali_light.c **** 	switch(opcode){
 1515              		.loc 1 436 0
 1516 0638 D12F     		cmp	r7, #209
 1517 063a 03D0     		beq	.L112
 1518 063c D52F     		cmp	r7, #213
 1519 063e 15D1     		bne	.L118
 437:../../../mesh/app/ali_light/ali_light.c **** 	case MM_MSG_ALIS_ATTR_CONFIRMATION:{
 438:../../../mesh/app/ali_light/ali_light.c **** 		m_printf_hex(L_APP, "ALI VENDOR RECV", data, len);
 1520              		.loc 1 438 0
 1521 0640 2F31     		adds	r1, r1, #47
 1522 0642 14E0     		b	.L119
 1523              	.L112:
 1524              	.LBB38:
 439:../../../mesh/app/ali_light/ali_light.c **** 	}break;
 440:../../../mesh/app/ali_light/ali_light.c **** 	case MM_MSG_ALIS_ATTR_SET:{
 441:../../../mesh/app/ali_light/ali_light.c **** 		m_printf_hex(L_APP, "ALI VENDOR SET RECV", data, len);
 1525              		.loc 1 441 0
 1526 0644 8020     		movs	r0, #128
 1527 0646 3F31     		adds	r1, r1, #63
 1528 0648 3300     		movs	r3, r6
 1529 064a 2A00     		movs	r2, r5
 1530 064c 8001     		lsls	r0, r0, #6
 1531 064e FFF7FEFF 		bl	m_printf_hex
 1532              	.LVL143:
 442:../../../mesh/app/ali_light/ali_light.c **** 		static uint8_t tid = 0;
 443:../../../mesh/app/ali_light/ali_light.c **** 		if(tid != data[0]){
 1533              		.loc 1 443 0
 1534 0652 0B4B     		ldr	r3, .L120
 1535 0654 2A78     		ldrb	r2, [r5]
 1536 0656 5979     		ldrb	r1, [r3, #5]
 1537 0658 9142     		cmp	r1, r2
 1538 065a 0ED0     		beq	.L107
 1539              	.LBB39:
 444:../../../mesh/app/ali_light/ali_light.c **** 			tid = data[0];
 1540              		.loc 1 444 0
 1541 065c 5A71     		strb	r2, [r3, #5]
 1542              	.LVL144:
 445:../../../mesh/app/ali_light/ali_light.c **** 			uint16_t cmd = data[1] + (data[2]<<8);
 446:../../../mesh/app/ali_light/ali_light.c **** 			if(cmd == 0x0123){
 447:../../../mesh/app/ali_light/ali_light.c **** 				uint16_t l = data[3] + (data[4]<<8);
 448:../../../mesh/app/ali_light/ali_light.c **** 				uint16_t h = data[5] + (data[6]<<8);
 449:../../../mesh/app/ali_light/ali_light.c **** 				uint16_t s = data[7] + (data[8]<<8);
 450:../../../mesh/app/ali_light/ali_light.c **** 				ali_light_rgb_set(l,h,s);
 451:../../../mesh/app/ali_light/ali_light.c **** 			}
 452:../../../mesh/app/ali_light/ali_light.c **** 			//do response
 453:../../../mesh/app/ali_light/ali_light.c **** 			bc_mm_ali_vendor_send(model_lid, MM_MSG_ALIS_ATTR_STATUS, (uint8_t*)data, len);
 1543              		.loc 1 453 0
 1544 065e D321     		movs	r1, #211
 1545 0660 3300     		movs	r3, r6
 1546 0662 2A00     		movs	r2, r5
 1547 0664 0398     		ldr	r0, [sp, #12]
 1548 0666 FFF7FEFF 		bl	bc_mm_ali_vendor_send
 1549              	.LVL145:
 1550 066a 06E0     		b	.L107
 1551              	.L118:
 1552              	.LBE39:
 1553              	.LBE38:
 454:../../../mesh/app/ali_light/ali_light.c **** 		}
 455:../../../mesh/app/ali_light/ali_light.c **** 	}break;
 456:../../../mesh/app/ali_light/ali_light.c **** 	default:
 457:../../../mesh/app/ali_light/ali_light.c **** 		m_printf_hex(L_APP, "Ali recv other", data, len);
 1554              		.loc 1 457 0
 1555 066c 5331     		adds	r1, r1, #83
 1556              	.L119:
 1557 066e 8020     		movs	r0, #128
 1558 0670 3300     		movs	r3, r6
 1559 0672 2A00     		movs	r2, r5
 1560 0674 8001     		lsls	r0, r0, #6
 1561 0676 FFF7FEFF 		bl	m_printf_hex
 1562              	.LVL146:
 1563              	.L107:
 1564              	.LBE37:
 1565              	.LBE36:
 458:../../../mesh/app/ali_light/ali_light.c **** 	break;
 459:../../../mesh/app/ali_light/ali_light.c **** 	}
 460:../../../mesh/app/ali_light/ali_light.c **** }
 1566              		.loc 1 460 0
 1567 067a 05B0     		add	sp, sp, #20
 1568              		@ sp needed
 1569              	.LVL147:
 1570 067c F0BD     		pop	{r4, r5, r6, r7, pc}
 1571              	.L121:
 1572 067e C046     		.align	2
 1573              	.L120:
 1574 0680 00000000 		.word	.LANCHOR0
 1575 0684 00000000 		.word	L_LEV
 1576 0688 80010000 		.word	.LANCHOR4
 1577 068c 00000000 		.word	.LANCHOR1
 1578              		.cfi_endproc
 1579              	.LFE104:
 1581              		.align	1
 1582              		.global	ali_light_init
 1583              		.code	16
 1584              		.thumb_func
 1586              	ali_light_init:
 1587              	.LFB105:
 461:../../../mesh/app/ali_light/ali_light.c **** 
 462:../../../mesh/app/ali_light/ali_light.c **** uint8_t ali_light_init(mesh_model_t** mdl, uint8_t* mcnt)
 463:../../../mesh/app/ali_light/ali_light.c **** {
 1588              		.loc 1 463 0
 1589              		.cfi_startproc
 1590              		@ args = 0, pretend = 0, frame = 8
 1591              		@ frame_needed = 0, uses_anonymous_args = 0
 1592              	.LVL148:
 1593 0690 F0B5     		push	{r4, r5, r6, r7, lr}
 1594              	.LCFI21:
 1595              		.cfi_def_cfa_offset 20
 1596              		.cfi_offset 4, -20
 1597              		.cfi_offset 5, -16
 1598              		.cfi_offset 6, -12
 1599              		.cfi_offset 7, -8
 1600              		.cfi_offset 14, -4
 464:../../../mesh/app/ali_light/ali_light.c **** 	M_PRINTF(L_APP, "-------init light---------");
 1601              		.loc 1 464 0
 1602 0692 4D4B     		ldr	r3, .L129
 463:../../../mesh/app/ali_light/ali_light.c **** 	M_PRINTF(L_APP, "-------init light---------");
 1603              		.loc 1 463 0
 1604 0694 85B0     		sub	sp, sp, #20
 1605              	.LCFI22:
 1606              		.cfi_def_cfa_offset 40
 1607              		.loc 1 464 0
 1608 0696 1B68     		ldr	r3, [r3]
 463:../../../mesh/app/ali_light/ali_light.c **** 	M_PRINTF(L_APP, "-------init light---------");
 1609              		.loc 1 463 0
 1610 0698 0700     		movs	r7, r0
 1611 069a 0391     		str	r1, [sp, #12]
 1612              		.loc 1 464 0
 1613 069c 9B04     		lsls	r3, r3, #18
 1614 069e 16D5     		bpl	.L123
 1615              		.loc 1 464 0 is_stmt 0 discriminator 5
 1616 06a0 4A4D     		ldr	r5, .L129+4
 1617 06a2 4B4C     		ldr	r4, .L129+8
 1618 06a4 2B00     		movs	r3, r5
 1619 06a6 6233     		adds	r3, r3, #98
 1620 06a8 0093     		str	r3, [sp]
 1621 06aa 2200     		movs	r2, r4
 1622 06ac 2000     		movs	r0, r4
 1623              	.LVL149:
 1624 06ae E823     		movs	r3, #232
 1625 06b0 2100     		movs	r1, r4
 1626              	.LVL150:
 1627 06b2 2532     		adds	r2, r2, #37
 1628 06b4 5B00     		lsls	r3, r3, #1
 1629 06b6 3130     		adds	r0, r0, #49
 1630 06b8 FFF7FEFF 		bl	m_print
 1631              	.LVL151:
 1632 06bc 2800     		movs	r0, r5
 1633 06be 7130     		adds	r0, r0, #113
 1634 06c0 FFF7FEFF 		bl	m_print
 1635              	.LVL152:
 1636 06c4 2000     		movs	r0, r4
 1637 06c6 A11D     		adds	r1, r4, #6
 1638 06c8 5F30     		adds	r0, r0, #95
 1639 06ca FFF7FEFF 		bl	m_print
 1640              	.LVL153:
 1641              	.L123:
 465:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light = ke_malloc(sizeof(ali_light_t), 0);
 1642              		.loc 1 465 0 is_stmt 1
 1643 06ce 0021     		movs	r1, #0
 1644 06d0 BC20     		movs	r0, #188
 1645 06d2 FFF7FEFF 		bl	ke_malloc
 1646              	.LVL154:
 1647 06d6 3F4D     		ldr	r5, .L129+12
 466:../../../mesh/app/ali_light/ali_light.c **** 	if(p_ali_light == NULL)
 467:../../../mesh/app/ali_light/ali_light.c **** 		return 1;
 1648              		.loc 1 467 0
 1649 06d8 0124     		movs	r4, #1
 465:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light = ke_malloc(sizeof(ali_light_t), 0);
 1650              		.loc 1 465 0
 1651 06da 2860     		str	r0, [r5]
 466:../../../mesh/app/ali_light/ali_light.c **** 	if(p_ali_light == NULL)
 1652              		.loc 1 466 0
 1653 06dc 0028     		cmp	r0, #0
 1654 06de 70D0     		beq	.L124
 468:../../../mesh/app/ali_light/ali_light.c **** 	
 469:../../../mesh/app/ali_light/ali_light.c **** 	ali_light_param_init();
 1655              		.loc 1 469 0
 1656 06e0 FFF7FEFF 		bl	ali_light_param_init
 1657              	.LVL155:
 470:../../../mesh/app/ali_light/ali_light.c **** 	//ali local quick restore parameter
 471:../../../mesh/app/ali_light/ali_light.c **** 	ali_light_quick_restore_init();
 1658              		.loc 1 471 0
 1659 06e4 FFF7FEFF 		bl	ali_light_quick_restore_init
 1660              	.LVL156:
 472:../../../mesh/app/ali_light/ali_light.c **** #ifdef BREATH_CONFIG
 473:../../../mesh/app/ali_light/ali_light.c **** 	//open light 
 474:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.mode = BREATH_MODE_FLOW;
 475:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.rCnt = 1;
 476:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->breath.pCnt = REPEAT_COUNTER;
 477:../../../mesh/app/ali_light/ali_light.c **** 	led_cw_set_on_off(ALI_CW_ON, &p_ali_light->breath);
 478:../../../mesh/app/ali_light/ali_light.c **** #endif
 479:../../../mesh/app/ali_light/ali_light.c **** 	
 480:../../../mesh/app/ali_light/ali_light.c **** 	//start timer for clear
 481:../../../mesh/app/ali_light/ali_light.c **** 	SYS_SetTimer(&p_ali_light->startDelayTimer, (int)ALI_QUICK_START_TIME/10, 
 1661              		.loc 1 481 0
 1662 06e8 2868     		ldr	r0, [r5]
 1663 06ea 3B4B     		ldr	r3, .L129+16
 1664 06ec 0022     		movs	r2, #0
 1665 06ee C821     		movs	r1, #200
 1666 06f0 0C30     		adds	r0, r0, #12
 1667 06f2 FFF7FEFF 		bl	SYS_SetTimer
 1668              	.LVL157:
 482:../../../mesh/app/ali_light/ali_light.c **** 					TIMER_SINGLE, (Timer_Expire_CB)ali_light_quick_restore_timer_cb);
 483:../../../mesh/app/ali_light/ali_light.c **** 
 484:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->oo_ctrl.set = ali_light_cw_set_on_off;
 1669              		.loc 1 484 0
 1670 06f6 2868     		ldr	r0, [r5]
 1671 06f8 384B     		ldr	r3, .L129+20
 1672 06fa 0100     		movs	r1, r0
 1673 06fc 9831     		adds	r1, r1, #152
 1674 06fe 0B60     		str	r3, [r1]
 485:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->oo_ctrl.get = ali_light_cw_get_on_off;
 1675              		.loc 1 485 0
 1676 0700 0300     		movs	r3, r0
 1677 0702 374A     		ldr	r2, .L129+24
 1678 0704 9C33     		adds	r3, r3, #156
 1679 0706 1A60     		str	r2, [r3]
 486:../../../mesh/app/ali_light/ali_light.c **** 	mesh_model_t* tmModel = &p_ali_light->model[p_ali_light->model_cnt++];
 1680              		.loc 1 486 0
 1681 0708 0200     		movs	r2, r0
 1682 070a 5432     		adds	r2, r2, #84
 1683 070c 1378     		ldrb	r3, [r2]
 1684 070e 1C19     		adds	r4, r3, r4
 1685 0710 1470     		strb	r4, [r2]
 1686              	.LVL158:
 487:../../../mesh/app/ali_light/ali_light.c **** 	tmModel->offset = 0;//element num
 1687              		.loc 1 487 0
 1688 0712 0024     		movs	r4, #0
 1689 0714 1B01     		lsls	r3, r3, #4
 1690              	.LVL159:
 1691 0716 C218     		adds	r2, r0, r3
 1692 0718 5C32     		adds	r2, r2, #92
 486:../../../mesh/app/ali_light/ali_light.c **** 	mesh_model_t* tmModel = &p_ali_light->model[p_ali_light->model_cnt++];
 1693              		.loc 1 486 0
 1694 071a 5833     		adds	r3, r3, #88
 1695              		.loc 1 487 0
 1696 071c 1470     		strb	r4, [r2]
 486:../../../mesh/app/ali_light/ali_light.c **** 	mesh_model_t* tmModel = &p_ali_light->model[p_ali_light->model_cnt++];
 1697              		.loc 1 486 0
 1698 071e C018     		adds	r0, r0, r3
 488:../../../mesh/app/ali_light/ali_light.c **** 	/*Init generic on off model*/
 489:../../../mesh/app/ali_light/ali_light.c **** 	bc_mm_gens_oo_init(tmModel, &p_ali_light->oo_ctrl);
 1699              		.loc 1 489 0
 1700 0720 FFF7FEFF 		bl	bc_mm_gens_oo_init
 1701              	.LVL160:
 490:../../../mesh/app/ali_light/ali_light.c **** 
 491:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->light_ln_ctrl.set = ali_light_cw_set_lightness;
 1702              		.loc 1 491 0
 1703 0724 2868     		ldr	r0, [r5]
 1704 0726 2F4B     		ldr	r3, .L129+28
 1705 0728 0100     		movs	r1, r0
 1706 072a A031     		adds	r1, r1, #160
 1707 072c 0B60     		str	r3, [r1]
 492:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->light_ln_ctrl.get = ali_light_cw_get_lightness;
 1708              		.loc 1 492 0
 1709 072e 0300     		movs	r3, r0
 1710 0730 2D4A     		ldr	r2, .L129+32
 1711 0732 A433     		adds	r3, r3, #164
 1712 0734 1A60     		str	r2, [r3]
 493:../../../mesh/app/ali_light/ali_light.c **** 	tmModel = &p_ali_light->model[p_ali_light->model_cnt++];
 1713              		.loc 1 493 0
 1714 0736 0200     		movs	r2, r0
 1715 0738 5432     		adds	r2, r2, #84
 1716 073a 1378     		ldrb	r3, [r2]
 1717 073c 5E1C     		adds	r6, r3, #1
 494:../../../mesh/app/ali_light/ali_light.c **** 	tmModel->offset = 0;//element num
 1718              		.loc 1 494 0
 1719 073e 1B01     		lsls	r3, r3, #4
 493:../../../mesh/app/ali_light/ali_light.c **** 	tmModel = &p_ali_light->model[p_ali_light->model_cnt++];
 1720              		.loc 1 493 0
 1721 0740 1670     		strb	r6, [r2]
 1722              		.loc 1 494 0
 1723 0742 C218     		adds	r2, r0, r3
 1724 0744 5C32     		adds	r2, r2, #92
 493:../../../mesh/app/ali_light/ali_light.c **** 	tmModel = &p_ali_light->model[p_ali_light->model_cnt++];
 1725              		.loc 1 493 0
 1726 0746 5833     		adds	r3, r3, #88
 1727 0748 C018     		adds	r0, r0, r3
 1728              		.loc 1 494 0
 1729 074a 1470     		strb	r4, [r2]
 495:../../../mesh/app/ali_light/ali_light.c **** 	/*Init light lightness model*/
 496:../../../mesh/app/ali_light/ali_light.c **** 	bc_mm_light_ln_init(tmModel, &p_ali_light->light_ln_ctrl);
 1730              		.loc 1 496 0
 1731 074c FFF7FEFF 		bl	bc_mm_light_ln_init
 1732              	.LVL161:
 497:../../../mesh/app/ali_light/ali_light.c **** 
 498:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->light_ctl_ctrl.ctl_set = ali_light_cw_set_temperature;
 1733              		.loc 1 498 0
 1734 0750 2868     		ldr	r0, [r5]
 1735 0752 264B     		ldr	r3, .L129+36
 1736 0754 0100     		movs	r1, r0
 1737 0756 A831     		adds	r1, r1, #168
 1738 0758 0B60     		str	r3, [r1]
 499:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->light_ctl_ctrl.ctl_get = ali_light_cw_get_temperature;
 1739              		.loc 1 499 0
 1740 075a 0300     		movs	r3, r0
 1741 075c 244A     		ldr	r2, .L129+40
 1742 075e AC33     		adds	r3, r3, #172
 1743 0760 1A60     		str	r2, [r3]
 500:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->light_ctl_ctrl.ln_set = ali_light_cw_set_lightness;
 1744              		.loc 1 500 0
 1745 0762 204A     		ldr	r2, .L129+28
 1746 0764 5A60     		str	r2, [r3, #4]
 501:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->light_ctl_ctrl.ln_get = ali_light_cw_get_lightness;
 1747              		.loc 1 501 0
 1748 0766 204A     		ldr	r2, .L129+32
 1749 0768 9A60     		str	r2, [r3, #8]
 502:../../../mesh/app/ali_light/ali_light.c **** 	tmModel = &p_ali_light->model[p_ali_light->model_cnt++];
 1750              		.loc 1 502 0
 1751 076a 0200     		movs	r2, r0
 1752 076c 5432     		adds	r2, r2, #84
 1753 076e 1378     		ldrb	r3, [r2]
 1754 0770 5E1C     		adds	r6, r3, #1
 503:../../../mesh/app/ali_light/ali_light.c **** 	tmModel->offset = 0;//element num
 1755              		.loc 1 503 0
 1756 0772 1B01     		lsls	r3, r3, #4
 502:../../../mesh/app/ali_light/ali_light.c **** 	tmModel = &p_ali_light->model[p_ali_light->model_cnt++];
 1757              		.loc 1 502 0
 1758 0774 1670     		strb	r6, [r2]
 1759              		.loc 1 503 0
 1760 0776 C218     		adds	r2, r0, r3
 1761 0778 5C32     		adds	r2, r2, #92
 502:../../../mesh/app/ali_light/ali_light.c **** 	tmModel = &p_ali_light->model[p_ali_light->model_cnt++];
 1762              		.loc 1 502 0
 1763 077a 5833     		adds	r3, r3, #88
 1764 077c C018     		adds	r0, r0, r3
 1765              		.loc 1 503 0
 1766 077e 1470     		strb	r4, [r2]
 504:../../../mesh/app/ali_light/ali_light.c **** 	/*Init light control model*/
 505:../../../mesh/app/ali_light/ali_light.c **** 	bc_mm_light_ctl_init(tmModel, &p_ali_light->light_ctl_ctrl);
 1767              		.loc 1 505 0
 1768 0780 FFF7FEFF 		bl	bc_mm_light_ctl_init
 1769              	.LVL162:
 506:../../../mesh/app/ali_light/ali_light.c **** 
 507:../../../mesh/app/ali_light/ali_light.c **** 	tmModel = &p_ali_light->model[p_ali_light->model_cnt++];
 1770              		.loc 1 507 0
 1771 0784 2868     		ldr	r0, [r5]
 1772 0786 0200     		movs	r2, r0
 1773 0788 5432     		adds	r2, r2, #84
 1774 078a 1378     		ldrb	r3, [r2]
 1775 078c 591C     		adds	r1, r3, #1
 508:../../../mesh/app/ali_light/ali_light.c **** 	tmModel->offset = 0;//element num
 1776              		.loc 1 508 0
 1777 078e 1B01     		lsls	r3, r3, #4
 507:../../../mesh/app/ali_light/ali_light.c **** 	tmModel->offset = 0;//element num
 1778              		.loc 1 507 0
 1779 0790 1170     		strb	r1, [r2]
 1780              		.loc 1 508 0
 1781 0792 C218     		adds	r2, r0, r3
 1782 0794 5C32     		adds	r2, r2, #92
 1783 0796 1470     		strb	r4, [r2]
 509:../../../mesh/app/ali_light/ali_light.c **** 	
 510:../../../mesh/app/ali_light/ali_light.c **** 	/*Init Ali vendor model*/
 511:../../../mesh/app/ali_light/ali_light.c **** 	p_ali_light->timer_ctrl.oo_ctrl = &p_ali_light->oo_ctrl;
 1784              		.loc 1 511 0
 1785 0798 0100     		movs	r1, r0
 1786 079a 0200     		movs	r2, r0
 507:../../../mesh/app/ali_light/ali_light.c **** 	tmModel->offset = 0;//element num
 1787              		.loc 1 507 0
 1788 079c 5833     		adds	r3, r3, #88
 1789              		.loc 1 511 0
 1790 079e B832     		adds	r2, r2, #184
 1791 07a0 9831     		adds	r1, r1, #152
 1792 07a2 1160     		str	r1, [r2]
 507:../../../mesh/app/ali_light/ali_light.c **** 	tmModel->offset = 0;//element num
 1793              		.loc 1 507 0
 1794 07a4 C018     		adds	r0, r0, r3
 512:../../../mesh/app/ali_light/ali_light.c **** 	bc_mm_alis_vendor_init(tmModel, _ali_vendor_rx_cb, &p_ali_light->timer_ctrl);
 1795              		.loc 1 512 0
 1796 07a6 1349     		ldr	r1, .L129+44
 1797 07a8 FFF7FEFF 		bl	bc_mm_alis_vendor_init
 1798              	.LVL163:
 513:../../../mesh/app/ali_light/ali_light.c **** 	
 514:../../../mesh/app/ali_light/ali_light.c **** 	*mdl = p_ali_light->model;
 1799              		.loc 1 514 0
 1800 07ac 2B68     		ldr	r3, [r5]
 515:../../../mesh/app/ali_light/ali_light.c **** 	*mcnt = p_ali_light->model_cnt;
 516:../../../mesh/app/ali_light/ali_light.c **** 
 517:../../../mesh/app/ali_light/ali_light.c **** 	_ready_to_indicate(true);
 1801              		.loc 1 517 0
 1802 07ae 0120     		movs	r0, #1
 514:../../../mesh/app/ali_light/ali_light.c **** 	*mcnt = p_ali_light->model_cnt;
 1803              		.loc 1 514 0
 1804 07b0 1A00     		movs	r2, r3
 1805 07b2 5832     		adds	r2, r2, #88
 1806 07b4 3A60     		str	r2, [r7]
 515:../../../mesh/app/ali_light/ali_light.c **** 	*mcnt = p_ali_light->model_cnt;
 1807              		.loc 1 515 0
 1808 07b6 5433     		adds	r3, r3, #84
 1809 07b8 1B78     		ldrb	r3, [r3]
 1810 07ba 039A     		ldr	r2, [sp, #12]
 1811 07bc 1370     		strb	r3, [r2]
 1812              		.loc 1 517 0
 1813 07be FFF71FFC 		bl	_ready_to_indicate
 1814              	.LVL164:
 1815              	.L124:
 518:../../../mesh/app/ali_light/ali_light.c **** 
 519:../../../mesh/app/ali_light/ali_light.c **** #ifdef FOR_ALI_TEST
 520:../../../mesh/app/ali_light/ali_light.c **** 	ali_light_key_init();
 521:../../../mesh/app/ali_light/ali_light.c **** #endif
 522:../../../mesh/app/ali_light/ali_light.c **** 	return 0;
 523:../../../mesh/app/ali_light/ali_light.c **** }
 1816              		.loc 1 523 0
 1817 07c2 2000     		movs	r0, r4
 1818 07c4 05B0     		add	sp, sp, #20
 1819              		@ sp needed
 1820              	.LVL165:
 1821 07c6 F0BD     		pop	{r4, r5, r6, r7, pc}
 1822              	.L130:
 1823              		.align	2
 1824              	.L129:
 1825 07c8 00000000 		.word	L_LEV
 1826 07cc 80010000 		.word	.LANCHOR4
 1827 07d0 00000000 		.word	.LANCHOR1
 1828 07d4 00000000 		.word	.LANCHOR0
 1829 07d8 00000000 		.word	ali_light_quick_restore_timer_cb
 1830 07dc 00000000 		.word	ali_light_cw_set_on_off
 1831 07e0 00000000 		.word	ali_light_cw_get_on_off
 1832 07e4 00000000 		.word	ali_light_cw_set_lightness
 1833 07e8 00000000 		.word	ali_light_cw_get_lightness
 1834 07ec 00000000 		.word	ali_light_cw_set_temperature
 1835 07f0 00000000 		.word	ali_light_cw_get_temperature
 1836 07f4 00000000 		.word	_ali_vendor_rx_cb
 1837              		.cfi_endproc
 1838              	.LFE105:
 1840              		.align	1
 1841              		.global	ali_light_deinit
 1842              		.code	16
 1843              		.thumb_func
 1845              	ali_light_deinit:
 1846              	.LFB106:
 524:../../../mesh/app/ali_light/ali_light.c **** 
 525:../../../mesh/app/ali_light/ali_light.c **** uint8_t ali_light_deinit(mesh_model_t** mdl)
 526:../../../mesh/app/ali_light/ali_light.c **** {
 1847              		.loc 1 526 0
 1848              		.cfi_startproc
 1849              		@ args = 0, pretend = 0, frame = 0
 1850              		@ frame_needed = 0, uses_anonymous_args = 0
 1851              	.LVL166:
 1852 07f8 70B5     		push	{r4, r5, r6, lr}
 1853              	.LCFI23:
 1854              		.cfi_def_cfa_offset 16
 1855              		.cfi_offset 4, -16
 1856              		.cfi_offset 5, -12
 1857              		.cfi_offset 6, -8
 1858              		.cfi_offset 14, -4
 527:../../../mesh/app/ali_light/ali_light.c **** 	bc_mm_alis_vendor_deinit(&p_ali_light->model[--p_ali_light->model_cnt]);
 1859              		.loc 1 527 0
 1860 07fa 1E4C     		ldr	r4, .L136
 526:../../../mesh/app/ali_light/ali_light.c **** 	bc_mm_alis_vendor_deinit(&p_ali_light->model[--p_ali_light->model_cnt]);
 1861              		.loc 1 526 0
 1862 07fc 0500     		movs	r5, r0
 1863              		.loc 1 527 0
 1864 07fe 2268     		ldr	r2, [r4]
 1865 0800 1100     		movs	r1, r2
 1866 0802 5431     		adds	r1, r1, #84
 1867 0804 0B78     		ldrb	r3, [r1]
 1868 0806 013B     		subs	r3, r3, #1
 1869 0808 DBB2     		uxtb	r3, r3
 1870 080a 0B70     		strb	r3, [r1]
 1871 080c 1B01     		lsls	r3, r3, #4
 1872 080e 5833     		adds	r3, r3, #88
 1873 0810 D018     		adds	r0, r2, r3
 1874              	.LVL167:
 1875 0812 FFF7FEFF 		bl	bc_mm_alis_vendor_deinit
 1876              	.LVL168:
 528:../../../mesh/app/ali_light/ali_light.c **** 	bc_mm_light_ctl_deinit(&p_ali_light->model[--p_ali_light->model_cnt]);
 1877              		.loc 1 528 0
 1878 0816 2268     		ldr	r2, [r4]
 1879 0818 1100     		movs	r1, r2
 1880 081a 5431     		adds	r1, r1, #84
 1881 081c 0B78     		ldrb	r3, [r1]
 1882 081e 013B     		subs	r3, r3, #1
 1883 0820 DBB2     		uxtb	r3, r3
 1884 0822 0B70     		strb	r3, [r1]
 1885 0824 1B01     		lsls	r3, r3, #4
 1886 0826 5833     		adds	r3, r3, #88
 1887 0828 D018     		adds	r0, r2, r3
 1888 082a FFF7FEFF 		bl	bc_mm_light_ctl_deinit
 1889              	.LVL169:
 529:../../../mesh/app/ali_light/ali_light.c **** 	bc_mm_light_ln_deinit(&p_ali_light->model[--p_ali_light->model_cnt]);
 1890              		.loc 1 529 0
 1891 082e 2268     		ldr	r2, [r4]
 1892 0830 1100     		movs	r1, r2
 1893 0832 5431     		adds	r1, r1, #84
 1894 0834 0B78     		ldrb	r3, [r1]
 1895 0836 013B     		subs	r3, r3, #1
 1896 0838 DBB2     		uxtb	r3, r3
 1897 083a 0B70     		strb	r3, [r1]
 1898 083c 1B01     		lsls	r3, r3, #4
 1899 083e 5833     		adds	r3, r3, #88
 1900 0840 D018     		adds	r0, r2, r3
 1901 0842 FFF7FEFF 		bl	bc_mm_light_ln_deinit
 1902              	.LVL170:
 530:../../../mesh/app/ali_light/ali_light.c **** 	bc_mm_gens_oo_deinit(&p_ali_light->model[--p_ali_light->model_cnt]);
 1903              		.loc 1 530 0
 1904 0846 2268     		ldr	r2, [r4]
 1905 0848 1100     		movs	r1, r2
 1906 084a 5431     		adds	r1, r1, #84
 1907 084c 0B78     		ldrb	r3, [r1]
 1908 084e 013B     		subs	r3, r3, #1
 1909 0850 DBB2     		uxtb	r3, r3
 1910 0852 0B70     		strb	r3, [r1]
 1911 0854 1B01     		lsls	r3, r3, #4
 1912 0856 5833     		adds	r3, r3, #88
 1913 0858 D018     		adds	r0, r2, r3
 1914 085a FFF7FEFF 		bl	bc_mm_gens_oo_deinit
 1915              	.LVL171:
 531:../../../mesh/app/ali_light/ali_light.c **** 	if(p_ali_light){
 1916              		.loc 1 531 0
 1917 085e 2068     		ldr	r0, [r4]
 1918 0860 0028     		cmp	r0, #0
 1919 0862 03D0     		beq	.L132
 532:../../../mesh/app/ali_light/ali_light.c **** 		ke_free(p_ali_light);
 1920              		.loc 1 532 0
 1921 0864 FFF7FEFF 		bl	ke_free
 1922              	.LVL172:
 533:../../../mesh/app/ali_light/ali_light.c **** 		p_ali_light = NULL;
 1923              		.loc 1 533 0
 1924 0868 0023     		movs	r3, #0
 1925 086a 2360     		str	r3, [r4]
 1926              	.L132:
 534:../../../mesh/app/ali_light/ali_light.c **** 	}
 535:../../../mesh/app/ali_light/ali_light.c **** 	*mdl = NULL;
 1927              		.loc 1 535 0
 1928 086c 0020     		movs	r0, #0
 1929 086e 2860     		str	r0, [r5]
 536:../../../mesh/app/ali_light/ali_light.c **** 	return 0;
 537:../../../mesh/app/ali_light/ali_light.c **** }
 1930              		.loc 1 537 0
 1931              		@ sp needed
 1932              	.LVL173:
 1933 0870 70BD     		pop	{r4, r5, r6, pc}
 1934              	.L137:
 1935 0872 C046     		.align	2
 1936              	.L136:
 1937 0874 00000000 		.word	.LANCHOR0
 1938              		.cfi_endproc
 1939              	.LFE106:
 1941              		.align	1
 1942              		.global	ali_light_hal_rx
 1943              		.code	16
 1944              		.thumb_func
 1946              	ali_light_hal_rx:
 1947              	.LFB107:
 538:../../../mesh/app/ali_light/ali_light.c **** 
 539:../../../mesh/app/ali_light/ali_light.c **** void ali_light_hal_rx(const HAL_TYPE type,const uint8_t *data , uint8_t len)
 540:../../../mesh/app/ali_light/ali_light.c **** {
 1948              		.loc 1 540 0
 1949              		.cfi_startproc
 1950              		@ args = 0, pretend = 0, frame = 0
 1951              		@ frame_needed = 0, uses_anonymous_args = 0
 1952              		@ link register save eliminated.
 1953              	.LVL174:
 541:../../../mesh/app/ali_light/ali_light.c **** 	if(type == HAL_TST){
 542:../../../mesh/app/ali_light/ali_light.c **** #ifdef CONFIG_FACTORY_TEST
 543:../../../mesh/app/ali_light/ali_light.c **** 		if(p_ali_light->provState != 1 && len == 25 
 544:../../../mesh/app/ali_light/ali_light.c **** 			&&data[len-4] == 0x78 && data[len-3] == 0x56
 545:../../../mesh/app/ali_light/ali_light.c **** 			&&data[len-2] == 0x34 && data[len-1] == 0x12
 546:../../../mesh/app/ali_light/ali_light.c **** 			){
 547:../../../mesh/app/ali_light/ali_light.c **** 			
 548:../../../mesh/app/ali_light/ali_light.c **** 			static uint8_t tid;
 549:../../../mesh/app/ali_light/ali_light.c **** 			if(tid == data[9]){
 550:../../../mesh/app/ali_light/ali_light.c **** 				return;
 551:../../../mesh/app/ali_light/ali_light.c **** 			}
 552:../../../mesh/app/ali_light/ali_light.c **** 			tid = data[9];
 553:../../../mesh/app/ali_light/ali_light.c **** 			m_printf_hex(L_APP, "RECV FROM HAL_TST", data, len);
 554:../../../mesh/app/ali_light/ali_light.c **** 			//do light test
 555:../../../mesh/app/ali_light/ali_light.c **** 			const uint8_t*attVal = data+10;
 556:../../../mesh/app/ali_light/ali_light.c **** 			uint8_t attLen = len-10-4;
 557:../../../mesh/app/ali_light/ali_light.c **** 			uint8_t pos = 0;
 558:../../../mesh/app/ali_light/ali_light.c **** 			do{
 559:../../../mesh/app/ali_light/ali_light.c **** 				const uint8_t* attTmp = attVal+pos;
 560:../../../mesh/app/ali_light/ali_light.c **** 				uint16_t cmd = attTmp[0]+(attTmp[1]<<8);
 561:../../../mesh/app/ali_light/ali_light.c **** 				M_PRINTF(L_APP, "CMD[%x]", cmd);
 562:../../../mesh/app/ali_light/ali_light.c **** 				switch(cmd){
 563:../../../mesh/app/ali_light/ali_light.c **** 					case M_ATTR_ONOFF:{
 564:../../../mesh/app/ali_light/ali_light.c **** 						pos+=3;
 565:../../../mesh/app/ali_light/ali_light.c **** 						led_cw_set_on_off(attTmp[2], NULL);
 566:../../../mesh/app/ali_light/ali_light.c **** 						M_PRINTF(L_APP, "M_ATTR_ONOFF[%x]", attTmp[2]);
 567:../../../mesh/app/ali_light/ali_light.c **** 					}break;
 568:../../../mesh/app/ali_light/ali_light.c **** 					case M_ATTR_LTN:{
 569:../../../mesh/app/ali_light/ali_light.c **** 						uint16_t val = attTmp[2]+(attTmp[3]<<8);
 570:../../../mesh/app/ali_light/ali_light.c **** 						pos+=4;
 571:../../../mesh/app/ali_light/ali_light.c **** 						led_cw_set_lightness(val, NULL);
 572:../../../mesh/app/ali_light/ali_light.c **** 						M_PRINTF(L_APP, "M_ATTR_LTN[%x]", val);
 573:../../../mesh/app/ali_light/ali_light.c **** 					}break;
 574:../../../mesh/app/ali_light/ali_light.c **** 					case M_ATTR_TEMP:{
 575:../../../mesh/app/ali_light/ali_light.c **** 						uint16_t val = attTmp[2]+(attTmp[3]<<8);
 576:../../../mesh/app/ali_light/ali_light.c **** 						pos+=4;
 577:../../../mesh/app/ali_light/ali_light.c **** 						led_cw_set_temperature(val, NULL);
 578:../../../mesh/app/ali_light/ali_light.c **** 						M_PRINTF(L_APP, "M_ATTR_TEMP[%x]", val);
 579:../../../mesh/app/ali_light/ali_light.c **** 					}break;
 580:../../../mesh/app/ali_light/ali_light.c **** 					default:return;
 581:../../../mesh/app/ali_light/ali_light.c **** 				}
 582:../../../mesh/app/ali_light/ali_light.c **** 			}while(pos<attLen);
 583:../../../mesh/app/ali_light/ali_light.c **** 		}
 584:../../../mesh/app/ali_light/ali_light.c **** #endif
 585:../../../mesh/app/ali_light/ali_light.c **** 	}
 586:../../../mesh/app/ali_light/ali_light.c **** }
 1954              		.loc 1 586 0
 1955              		@ sp needed
 1956 0878 7047     		bx	lr
 1957              		.cfi_endproc
 1958              	.LFE107:
 1960              		.section	.rodata
 1961              		.set	.LANCHOR1,. + 0
 1962              		.set	.LANCHOR2,. + 128
 1963              		.set	.LANCHOR3,. + 256
 1964              		.set	.LANCHOR4,. + 384
 1967              	lgs:
 1968 0000 5B4D4C47 		.ascii	"[MLG]\000"
 1968      5D00
 1971              	lge:
 1972 0006 0D0A00   		.ascii	"\015\012\000"
 1973              	.LC3:
 1974 0009 2E2E2F2E 		.ascii	"../../../mesh/app/ali_light/ali_light.c\000"
 1974      2E2F2E2E 
 1974      2F6D6573 
 1974      682F6170 
 1974      702F616C 
 1975              	.LC5:
 1976 0031 25735B25 		.ascii	"%s[%10s:%d]%s:\000"
 1976      3130733A 
 1976      25645D25 
 1976      733A00
 1979              	__FUNCTION__.9374:
 1980 0040 616C695F 		.ascii	"ali_light_cw_set_on_off\000"
 1980      6C696768 
 1980      745F6377 
 1980      5F736574 
 1980      5F6F6E5F 
 1981              	.LC6:
 1982 0058 6F6E5B25 		.ascii	"on[%x]\000"
 1982      785D00
 1983              	.LC7:
 1984 005f 257300   		.ascii	"%s\000"
 1987              	__FUNCTION__.9406:
 1988 0062 616C695F 		.ascii	"ali_light_bind_timer_cb\000"
 1988      6C696768 
 1988      745F6269 
 1988      6E645F74 
 1988      696D6572 
 1989              	.LC19:
 1990 007a 6D5F7462 		.ascii	"m_tb_key_app_find error\000"
 1990      5F6B6579 
 1990      5F617070 
 1990      5F66696E 
 1990      64206572 
 1991              	.LC20:
 1992 0092 742D3E6C 		.ascii	"t->lid[%x] p_ali_light->model_cnt[%x] status[%x]\000"
 1992      69645B25 
 1992      785D2070 
 1992      5F616C69 
 1992      5F6C6967 
 1993              	.LC28:
 1994 00c3 616C695F 		.ascii	"ali_light_period_ind_timer_cb\000"
 1994      6C696768 
 1994      745F7065 
 1994      72696F64 
 1994      5F696E64 
 1997              	__FUNCTION__.9428:
 1998 00e1 616C695F 		.ascii	"ali_light_quick_restore_timer_cb\000"
 1998      6C696768 
 1998      745F7175 
 1998      69636B5F 
 1998      72657374 
 1999              	.LC34:
 2000 0102 00       		.ascii	"\000"
 2003              	__FUNCTION__.9433:
 2004 0103 616C695F 		.ascii	"ali_light_quick_restore_init\000"
 2004      6C696768 
 2004      745F7175 
 2004      69636B5F 
 2004      72657374 
 2005              	.LC46:
 2006 0120 6C656420 		.ascii	"led status = %d\000"
 2006      73746174 
 2006      7573203D 
 2006      20256400 
 2009              	__FUNCTION__.9449:
 2010 0130 616C695F 		.ascii	"ali_light_prov_state_get\000"
 2010      6C696768 
 2010      745F7072 
 2010      6F765F73 
 2010      74617465 
 2011              	.LC60:
 2012 0149 626F6E64 		.ascii	"bond status[%d]\000"
 2012      20737461 
 2012      7475735B 
 2012      25645D00 
 2015              	__FUNCTION__.9458:
 2016 0159 616C695F 		.ascii	"ali_light_param_init\000"
 2016      6C696768 
 2016      745F7061 
 2016      72616D5F 
 2016      696E6974 
 2017              	.LC72:
 2018 016e 64657669 		.ascii	"device type is changed [%d] to [%d]\000"
 2018      63652074 
 2018      79706520 
 2018      69732063 
 2018      68616E67 
 2021              	__FUNCTION__.9466:
 2022 0192 5F616C69 		.ascii	"_ali_vendor_rx_cb\000"
 2022      5F76656E 
 2022      646F725F 
 2022      72785F63 
 2022      6200
 2023              	.LC84:
 2024 01a4 6F70636F 		.ascii	"opcode[%x]\000"
 2024      64655B25 
 2024      785D00
 2025              	.LC85:
 2026 01af 414C4920 		.ascii	"ALI VENDOR RECV\000"
 2026      56454E44 
 2026      4F522052 
 2026      45435600 
 2027              	.LC86:
 2028 01bf 414C4920 		.ascii	"ALI VENDOR SET RECV\000"
 2028      56454E44 
 2028      4F522053 
 2028      45542052 
 2028      45435600 
 2029              	.LC87:
 2030 01d3 416C6920 		.ascii	"Ali recv other\000"
 2030      72656376 
 2030      206F7468 
 2030      657200
 2033              	__FUNCTION__.9481:
 2034 01e2 616C695F 		.ascii	"ali_light_init\000"
 2034      6C696768 
 2034      745F696E 
 2034      697400
 2035              	.LC100:
 2036 01f1 2D2D2D2D 		.ascii	"-------init light---------\000"
 2036      2D2D2D69 
 2036      6E697420 
 2036      6C696768 
 2036      742D2D2D 
 2037              		.bss
 2038              		.align	2
 2039              		.set	.LANCHOR0,. + 0
 2042              	p_ali_light:
 2043 0000 00000000 		.space	4
 2046              	_init.9368:
 2047 0004 00       		.space	1
 2050              	tid.9470:
 2051 0005 00       		.space	1
 2052              		.text
 2053              	.Letext0:
 2054              		.file 2 "d:\\meshstack\\bc6218\\tools\\gcc-arm-none-eabi-5_4-2016q3-20160926-win32\\arm-none-eabi\
 2055              		.file 3 "d:\\meshstack\\bc6218\\tools\\gcc-arm-none-eabi-5_4-2016q3-20160926-win32\\arm-none-eabi\
 2056              		.file 4 "../../../mesh/api/m_defines.h"
 2057              		.file 5 "../../../mesh/api/m_api_msg.h"
 2058              		.file 6 "../../../mesh/models/inc/mm_com.h"
 2059              		.file 7 "../../../drivers/hal/inc/bc62xx_timer.h"
 2060              		.file 8 "../../../mesh/models/inc/bc_mm_gen_oo.h"
 2061              		.file 9 "../../../mesh/models/inc/bc_mm_light_ln.h"
 2062              		.file 10 "../../../mesh/models/inc/bc_mm_light_ctl.h"
 2063              		.file 11 "../../../drivers/hal/inc/bc62xx_gpio.h"
 2064              		.file 12 "../../../drivers/led/inc/led.h"
 2065              		.file 13 "../../../mesh/app/app_mesh.h"
 2066              		.file 14 "../../../mesh/models/inc/mm_ali.h"
 2067              		.file 15 "../../../mesh/models/inc/ali_timer.h"
 2068              		.file 16 "../../../mesh/app/ali_light/ali_light.h"
 2069              		.file 17 "../../../mesh/common/api/co_log.h"
 2070              		.file 18 "../../../mesh/models/inc/mm_alis.h"
 2071              		.file 19 "../../../device/inc/bc_sys.h"
 2072              		.file 20 "../../../drivers/hal/inc/bc_flash.h"
 2073              		.file 21 "../../../mesh/api/m_api.h"
 2074              		.file 22 "../../../mesh/port/meshTimer.h"
 2075              		.file 23 "../../../mesh/app/ali_config.h"
 2076              		.file 24 "../../../mesh/port/port.h"
